# NAS 보안이란?

## 개념 정의
NAS 보안은 네트워크 연결 스토리지(NAS) 장치에 저장된 데이터를 무단 접근, 랜섬웨어 공격, 데이터 유출, 악성코드 감염으로부터 보호하기 위한 보안 정책과 기술의 집합이다. NAS는 중요한 개인정보·업무 데이터·백업 파일을 중앙 집중식으로 저장하기 때문에 해커의 주요 타깃이 되며, 적절한 보안 조치 없이 운영할 경우 심각한 데이터 손실·유출·위변조 위험에 노출된다.

쉽게 말해 "집이나 회사의 중요한 모든 파일이 저장된 NAS를 해커·랜섬웨어·실수로부터 안전하게 지키는 보안 대책"이다.

## 주요 보안 위협

### 1. 랜섬웨어 감염

**위협 개요**
- NAS에 저장된 모든 파일을 암호화하고 금전 요구
- 중앙 저장소인 NAS를 공격하면 기업·가정의 모든 데이터를 한 번에 무력화
- 백업까지 암호화되면 복구 불가능

**공격 경로**
- 네트워크에 연결된 PC가 랜섬웨어 감염 → NAS 공유 폴더로 확산
- NAS의 취약점을 직접 공격 (CVE 악용)
- 인터넷에 노출된 NAS에 무차별 대입 공격

**피해 사례**
- 2019년 Qlocker 랜섬웨어: QNAP NAS 대상 공격
- 2021년 DeadBolt 랜섬웨어: 수천 대의 NAS 동시 공격

### 2. 데이터 유출

**위협 개요**
- 민감한 개인정보·업무 기밀·고객 데이터 탈취
- 취약한 인증·암호화 부재·공개 포트 노출 악용

**유출 경로**
- 취약한 비밀번호로 관리자 계정 탈취
- 펌웨어 취약점 악용해 백도어 설치
- 인터넷에 노출된 NAS에 무단 접근
- 내부자가 권한 남용

**결과**
- 개인정보 유출로 GDPR·PIPA 위반
- 기업 기밀 유출로 경쟁력 상실
- 금전적 손실·법적 책임

### 3. 데이터 위변조

**위협 개요**
- 무단 접근한 공격자가 파일을 변경·삭제
- 데이터 무결성 손상으로 신뢰성 상실

**영향**
- 재무 데이터 위변조로 회계 오류
- 계약서·법률 문서 변조
- 백업 데이터 삭제로 복구 불가

### 4. DDoS 공격 및 서비스 중단

**위협 개요**
- NAS를 대상으로 대량의 요청을 보내 서비스 마비
- 중요 업무 시간에 파일 접근 불가

### 5. 악성코드·백도어 설치

**위협 개요**
- NAS에 악성 스크립트·봇넷 설치
- NAS를 좀비 PC로 활용해 다른 공격의 거점으로 사용

## 주요 보안 취약점

### 1. 약한 인증 및 취약한 비밀번호

**문제점**
- 기본 관리자 계정(admin) 그대로 사용
- 간단한 비밀번호(password, 1234, admin 등)
- 모든 사용자가 동일한 비밀번호 공유

**공격 방법**
- 무차별 대입 공격(Brute Force)
- 사전 공격(Dictionary Attack)
- 자격 증명 스터핑(Credential Stuffing)

### 2. 암호화 부재

**문제점**
- 저장된 데이터가 평문으로 보관
- 네트워크 전송 시 암호화 안 함
- 디스크 도난 시 데이터 노출

### 3. 펌웨어·소프트웨어 취약점

**문제점**
- 제조사 보안 패치 미적용
- 오래된 펌웨어 사용 (EOL 버전)
- 알려진 CVE 취약점 방치

**위험**
- 공격자가 공개된 취약점을 악용해 원격 코드 실행(RCE)
- 권한 상승(Privilege Escalation)
- 백도어 설치

### 4. 접근 권한·파일 공유 설정 오류

**문제점**
- 모든 사용자에게 읽기·쓰기·삭제 권한 부여
- 게스트 계정 활성화
- 공유 폴더를 인터넷에 공개
- 최소 권한 원칙 미적용

**위험**
- 내부자가 중요 파일 삭제·유출
- 외부 공격자가 무단 접근

### 5. 미처리된 공개 포트 및 인터넷 노출

**문제점**
- NAS 관리 포트(5000, 5001, 22, 21)를 인터넷에 직접 노출
- UPnP 자동 포트 포워딩으로 의도치 않게 공개
- Shodan, Censys 같은 검색 엔진에 노출

**위험**
- 전 세계 누구나 NAS에 접근 시도 가능
- 자동화된 봇이 취약점 스캔·공격

### 6. 백업 부재 또는 부적절한 백업

**문제점**
- 백업을 NAS와 같은 네트워크에 저장 (랜섬웨어 동시 암호화)
- 백업 자동화 미설정
- 복구 테스트 안 함

### 7. 사용자 실수

**문제점**
- 피싱 메일로 자격 증명 유출
- 악성 링크 클릭으로 PC 감염 → NAS 전파
- 불필요한 서비스 활성화 (SSH, FTP, Telnet)

## NAS 보안 모범 사례

### 1. 강력한 비밀번호 및 계정 관리

**강력한 비밀번호 설정**
- 최소 12자 이상
- 대소문자·숫자·특수문자 혼합
- 사전 단어 피하기
- 예: `uLd&3m*P9xK@`

**기본 관리자 계정 비활성화**
- admin 계정 삭제 또는 권한 강등
- 새 관리자 계정 생성 (예측 불가능한 이름)
- 각 사용자마다 고유 계정 부여

**주기적 비밀번호 변경**
- 3~6개월마다 변경
- 이전 비밀번호 재사용 금지

**비밀번호 관리자 사용**
- 1Password, Bitwarden, LastPass 등
- 복잡한 비밀번호 자동 생성·저장

### 2. 2단계 인증(2FA) 활성화

**개념**
- 비밀번호 + 인증 코드(OTP) 이중 확인
- 비밀번호 유출되어도 추가 보호

**설정 방법**
- Synology, QNAP 등 NAS 설정에서 2FA 활성화
- Google Authenticator, Authy 앱 연동
- 로그인 시 6자리 OTP 입력 필수

**적용 범위**
- 관리자 계정 필수
- 원격 접속 사용자 권장

### 3. 펌웨어·소프트웨어 최신 업데이트

**중요성**
- 제조사가 발견된 취약점 패치 제공
- 보안 패치 미적용 시 공격 위험 증가

**자동 업데이트 활성화**
- NAS 설정 → 자동 업데이트 활성화
- 정기적으로 수동 확인 (월 1회)

**EOL(End-of-Life) 제품 교체**
- 제조사가 지원 종료한 모델은 교체 고려
- 보안 패치 중단되면 취약점 누적

### 4. 네트워크 보안 강화

**기본 포트 변경**
- HTTP: 5000 → 랜덤 포트 (예: 38492)
- HTTPS: 5001 → 랜덤 포트 (예: 48593)
- SSH: 22 → 랜덤 포트 (예: 22022)
- 공격자의 자동 스캔 회피

**인터넷 직접 노출 금지**
- NAS를 프라이빗 네트워크에만 배치
- 외부 접근은 VPN 통해서만 허용
- UPnP 비활성화 (자동 포트 포워딩 차단)

**방화벽 활성화**
- NAS 내장 방화벽 활성화
- 신뢰할 수 있는 IP 주소만 허용 (IP 화이트리스트)
- 특정 국가 IP 차단 (Geo-blocking)

**DoS 방어 활성화**
- DDoS 공격 방어 기능 활성화
- 비정상적인 트래픽 자동 차단

### 5. VPN 사용

**원격 접근 시 VPN 필수**
- 외부에서 NAS 접근 시 VPN 연결 후 접속
- 인터넷에 NAS 포트 직접 노출 금지

**NAS VPN 서버 구축**
- Synology, QNAP은 VPN 서버 기능 내장
- OpenVPN, L2TP/IPsec 지원
- 모바일에서도 VPN 앱으로 안전하게 접근

### 6. SSL/TLS 암호화 활성화

**HTTPS 강제**
- HTTP 비활성화, HTTPS만 사용
- 브라우저 주소창에 자물쇠 아이콘 확인
- 인증서 설치 (Let's Encrypt 무료 인증서)

**관리 세션 암호화**
- 관리자 콘솔 접속 시 HTTPS 필수
- SSH 접속 시 키 기반 인증 사용
- Telnet, FTP 같은 평문 프로토콜 비활성화

### 7. 데이터 암호화

**저장 시 암호화(Encryption at Rest)**
- 공유 폴더 암호화 활성화
- AES-256 암호화 알고리즘 사용
- 디스크 도난 시에도 데이터 보호

**전송 중 암호화(Encryption in Transit)**
- SMB 암호화 활성화
- SFTP, FTPS 사용 (FTP 금지)
- TLS 1.2 이상 강제

### 8. 접근 제어 및 최소 권한 원칙

**사용자별 권한 분리**
- 각 사용자에게 필요한 최소 권한만 부여
- 읽기 전용 vs 읽기·쓰기 구분
- 중요 폴더는 특정 사용자만 접근

**그룹 관리**
- 부서·역할별 그룹 생성
- 그룹 단위로 권한 관리

**게스트 계정 비활성화**
- 익명 접근 차단
- 인증 없는 파일 공유 금지

**세션 타임아웃 설정**
- 일정 시간 미사용 시 자동 로그아웃
- 예: 15분 미사용 시 세션 종료

### 9. 로그 모니터링 및 알림

**로그 모니터링**
- 로그인 시도 기록 추적
- 파일 접근·수정·삭제 로그 확인
- 실패한 로그인 시도 분석 (무차별 대입 공격 감지)

**자동 알림 설정**
- 로그인 실패 5회 이상 → 이메일 알림
- 중요 파일 삭제 시 알림
- 펌웨어 업데이트 가능 시 알림

**IP 차단 (Auto Block)**
- 로그인 실패 N회 시 해당 IP 자동 차단
- 예: 5회 실패 시 24시간 차단

### 10. 백업 전략 (3-2-1 규칙)

**3-2-1 백업 규칙**
- **3개의 복사본**: 원본 + 2개 백업
- **2가지 매체**: NAS + 외장 HDD 또는 클라우드
- **1개는 오프사이트**: 다른 물리적 위치 또는 클라우드

**백업 자동화**
- 스케줄된 자동 백업 (매일, 매주)
- Synology Hyper Backup, QNAP HBS 등 활용

**백업 격리**
- 백업을 NAS와 다른 네트워크에 저장
- 랜섬웨어가 백업까지 암호화 못하도록
- 오프라인 백업 (주기적으로 외장 HDD에 백업 후 분리)

**정기 복구 테스트**
- 백업이 실제로 복구 가능한지 주기적 테스트
- 분기별 1회 테스트 권장

### 11. 불필요한 서비스 비활성화

**비활성화 권장 서비스**
- Telnet (평문 전송, SSH로 대체)
- FTP (SFTP, FTPS로 대체)
- SNMP v1/v2 (v3만 사용)
- UPnP (자동 포트 포워딩)

**사용하는 서비스만 활성화**
- 필요한 프로토콜만 선택적 활성화
- 공격 표면 최소화

### 12. 안티바이러스·안티멀웨어 사용

**NAS용 보안 소프트웨어 설치**
- Synology Antivirus, QNAP Malware Remover
- 실시간 스캔 활성화
- 정기 전체 스캔 (주 1회)

**파일 업로드 시 자동 스캔**
- 업로드되는 파일을 즉시 스캔
- 악성 파일 자동 격리·삭제

### 13. 스냅샷·버전 관리

**스냅샷 기능 활용**
- 파일 시스템의 특정 시점 스냅샷 저장
- 랜섬웨어 암호화 전 상태로 즉시 복원
- 스냅샷은 읽기 전용 (랜섬웨어가 손상 못 함)

**스냅샷 스케줄**
- 매시간 또는 매일 스냅샷
- 여러 버전 유지 (예: 최근 24시간 매시간, 30일간 매일)

### 14. 보안 감사 및 정기 점검

**주기적 보안 점검**
- 월 1회 사용자 계정·권한 리뷰
- 분기 1회 보안 설정 점검
- 로그 분석으로 이상 징후 탐지

**보안 취약점 스캔**
- NAS 제조사 제공 보안 스캔 도구 사용
- Synology Security Advisor
- QNAP Security Counselor

**침투 테스트**
- 외부 보안 전문가가 NAS 공격 시도
- 취약점 발견 및 개선

## 추가 보안 권장 사항

### 물리적 보안

**NAS 물리적 접근 제한**
- 잠금 장치가 있는 서버실·캐비닛에 보관
- 허가된 인원만 접근
- CCTV 모니터링

**하드디스크 암호화**
- Self-Encrypting Drive(SED) 사용
- 디스크 도난 시에도 데이터 보호

### 네트워크 세그멘테이션

**VLAN 분리**
- NAS를 별도 VLAN에 배치
- 일반 사용자 네트워크와 분리
- 방화벽 규칙으로 트래픽 제어

**Zero Trust 접근**
- 내부 네트워크도 신뢰하지 않음
- 모든 접근 요청 검증

### 클라우드 백업

**클라우드 동기화**
- AWS S3, Google Drive, Microsoft OneDrive에 추가 백업
- 랜섬웨어·재해로부터 완전한 격리
- 버전 관리 활성화 (삭제·변경 파일 복구)

## 실제 공격 사례 및 교훈

### Qlocker 랜섬웨어 (2021)

**공격 방법**
- QNAP NAS의 취약점 악용
- 파일을 7-Zip으로 암호화 후 비트코인 요구

**교훈**
- 펌웨어를 최신 상태로 유지
- 인터넷 직접 노출 금지

### DeadBolt 랜섬웨어 (2022)

**공격 방법**
- 인터넷에 노출된 NAS 대상 무차별 공격
- 제로데이 취약점 악용

**교훈**
- VPN 없이 외부 접근 금지
- 2FA 활성화

## 요약

NAS 보안은 랜섬웨어, 데이터 유출, 악성코드 감염으로부터 중앙 집중식 스토리지를 보호하기 위한 필수적인 보안 조치다. 강력한 비밀번호·2FA, 펌웨어 최신 업데이트, 인터넷 직접 노출 금지·VPN 사용, 데이터 암호화, 최소 권한 원칙, 3-2-1 백업 규칙, 불필요한 서비스 비활성화, 로그 모니터링, 스냅샷 활용을 통해 NAS를 안전하게 운영할 수 있다. 특히 중소기업과 가정에서 중요한 데이터를 보관하는 NAS는 해커의 주요 타깃이므로, 적극적인 보안 강화가 필수적이다.
