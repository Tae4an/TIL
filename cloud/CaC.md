# CaC (Compliance as Code)란?

## 개념 정의
CaC(Compliance as Code)는 **규제 준수 정책과 보안 규칙을 코드로 작성·관리·자동화하는 현대적 클라우드 보안 접근 방식**이다. 인프라 구성·배포·변경 시 자동으로 실행되어 설정 오류나 규제 위반 여부를 즉시 판단하고, 필요시 자동 수정까지 수행한다.

쉽게 말해 "사람이 체크리스트로 점검하던 규정 준수를 코드로 자동화해, 클라우드 환경 변화에 실시간 대응하는 보안·컴플라이언스 관리 체계"다.

## 핵심 특징

**실시간 자동 점검**
- 클라우드 리소스 생성·변경 시마다 정책 위반 여부 즉시 검증
- 수동 주기 점검 대신 지속적 모니터링(Continuous Compliance)

**코드 기반 정책 관리**
- YAML, JSON, HCL 등으로 정책 선언
- Git으로 버전 관리, 코드 리뷰, 이력 추적
- IaC(Infrastructure as Code)처럼 정책도 코드로 취급

**사전 예방 중심**
- 배포 전 CI/CD 파이프라인에서 규제 위반 차단
- 문제 발생 후 대응이 아닌, 원천 차단

**자동 리미디에이션(Auto-Remediation)**
- 위반 탐지 시 자동 수정 또는 경고·차단
- 사람 개입 최소화, 휴먼 에러 제거

**멀티 규제·멀티 클라우드 지원**
- ISMS-P, GDPR, HIPAA, PCI DSS, CIS Benchmark 등 여러 규제 동시 적용
- AWS, Azure, GCP, 온프레미스 통합 관리

## 배경: 왜 CaC가 필요한가?

**클라우드 환경의 특성**
- 리소스가 하루 수십~수백 번 생성·삭제됨
- 개발·보안·운영 팀 경계 모호, 누구나 인프라 변경 가능
- 멀티클라우드·하이브리드 환경의 복잡성 증가

**전통적 방식의 한계**
- 수동 점검은 느리고 실수 발생
- 주기적 감사는 변화 속도를 따라잡지 못함
- 문서 기반 정책은 해석·적용에 일관성 부족

**복잡해진 규제**
- 국내외 규제 동시 대응 필요(ISMS-P, 개인정보보호법, GDPR, HIPAA, PCI DSS 등)
- 규제 변화에 신속한 대응 필요

## 전통 방식 vs CaC 비교

| 구분 | 전통적 규제 준수 | CaC |
|------|-----------------|-----|
| 점검 방식 | 수동, 주기적 | 실시간 자동 |
| 점검 주체 | 사람(보안팀) | 코드(자동화) |
| 대응 시점 | 사후 대응 | 사전 예방 |
| 정책 관리 | 문서·체크리스트 | 코드·버전관리 |
| 확장성 | 사람 증원 필요 | 자동 확장 |
| 일관성 | 사람마다 차이 | 100% 일관 |
| 속도 | 느림(수일~수주) | 즉시(초 단위) |

## 주요 활용 사례

**인프라 보안 자동 검증**
- S3 버킷 퍼블릭 접근 차단 정책 자동 적용
- IAM 과도한 권한(Wildcard *) 자동 탐지·경고
- 보안그룹 0.0.0.0/0 오픈 자동 차단

**규제 준수 자동화**
- CIS Benchmark 기준 AWS/Kubernetes 구성 자동 평가
- PCI DSS, HIPAA 요구사항 자동 점검·리포트 생성
- GDPR 데이터 보호 정책(암호화, 접근 제어) 자동 검증

**DevSecOps 통합**
- CI/CD 파이프라인에서 배포 전 정책 위반 검사
- Terraform/CloudFormation 코드 스캔으로 배포 차단
- PR(Pull Request) 단계에서 자동 보안 리뷰

**지속적 모니터링**
- 클라우드 환경 변경 실시간 감지
- 드리프트(Drift) 탐지: 정책과 실제 상태 차이 자동 감지
- 위반 이력 자동 로깅 및 대시보드 시각화

## 기본 워크플로

### 1. 정책 코드 작성
```yaml
# 예: AWS Config Rule
policy:
  name: s3-bucket-public-read-prohibited
  severity: CRITICAL
  resource: AWS::S3::Bucket
  condition:
    - PublicReadAccess == false
  remediation:
    auto: true
    action: BlockPublicAccess
```

### 2. 정책 배포 및 활성화
- Git에 정책 코드 커밋
- CI/CD 파이프라인을 통해 AWS Config, Azure Policy, OPA 등에 자동 배포
- 정책 활성화 및 리소스 스캔 시작

### 3. 실시간 모니터링
- 클라우드 리소스 변경 이벤트 감지
- 정책 엔진이 자동 평가
- 위반 시 알림(Slack, Email, PagerDuty) + 자동 수정 또는 차단

### 4. 리포팅 및 개선
- 컴플라이언스 대시보드로 전체 상태 가시화
- 위반 트렌드 분석, 반복 문제 개선
- 정책 코드 업데이트 및 재배포

## 주요 도구 및 플랫폼

**클라우드 네이티브**
- AWS Config, AWS Security Hub
- Azure Policy, Azure Blueprints
- Google Cloud Security Command Center

**오픈소스/서드파티**
- Open Policy Agent(OPA): 범용 정책 엔진
- Chef InSpec: 인프라 테스트·컴플라이언스 검증
- HashiCorp Sentinel: Terraform 정책 적용
- CloudFormation Guard: IaC 템플릿 검증
- Checkov: IaC 보안 스캔 도구

**CNAPP/CSPM 플랫폼**
- Wiz, Prisma Cloud, Orca Security 등 CNAPP 솔루션에 CaC 기능 내장

## 도입 효과

**보안 강화**
- 설정 오류·보안 사고 예방
- 과도한 권한, 잘못된 공개 설정 자동 차단
- 일관된 보안 기준 적용

**규제 준수 자동화**
- 주기적 감사 준비 부담 감소
- 실시간 컴플라이언스 상태 파악
- 감사 리포트 자동 생성

**운영 효율성**
- 수동 점검 시간 대폭 절감
- 보안팀·개발팀 협업 강화(공통 코드 기반)
- 정책 변경 신속 반영

**비용 절감**
- 보안 사고 방지로 인한 비용 절감
- 자동화로 인력 리소스 최적화

## 보안 및 운영 모범 사례

**정책 설계**
- 규제 요구사항을 명확한 룰로 코드화
- 우선순위(Critical/High/Medium/Low) 명시
- False Positive 최소화 위해 정책 지속 튜닝

**버전 관리**
- Git으로 정책 버전 관리, 변경 이력 추적
- PR/코드 리뷰로 정책 변경 검증
- 롤백 가능한 구조 유지

**테스트**
- 프로덕션 적용 전 테스트 환경에서 검증
- 정책 시뮬레이션으로 영향 범위 사전 파악

**통합**
- CI/CD 파이프라인에 정책 검사 단계 추가
- SIEM, 알림 시스템과 연동
- 대시보드로 전체 컴플라이언스 상태 가시화

**문화**
- 개발·보안·운영 팀 모두가 정책 코드 이해·참여
- "보안은 모두의 책임" 문화 정착
- 정책 위반 시 비난이 아닌 개선 기회로 활용

CaC는 클라우드 시대의 보안·규제 준수를 자동화하는 필수 접근법으로, DevSecOps와 함께 현대적 클라우드 운영의 핵심 실천 방법이다.
