# 데이터 웨어하우징이란?

## 개념 정의
데이터 웨어하우징(Data Warehousing)은 조직의 다양한 운영 시스템과 외부 소스로부터 데이터를 수집·통합·저장하고, 비즈니스 인텔리전스(BI), 분석, 의사결정을 지원하기 위해 최적화된 중앙 집중식 데이터 저장소를 구축·운영하는 전체 프로세스와 아키텍처를 의미한다. 데이터 웨어하우스는 정형 데이터를 사전 정제·변환하여 읽기 전용 형태로 저장하며, 빠른 쿼리 성능과 일관된 보고서 제공을 목표로 한다.

쉽게 말해 "흩어진 업무 시스템의 데이터를 한곳에 모아 정리한 뒤, 경영진과 분석가가 빠르게 인사이트를 얻을 수 있도록 최적화된 분석 전용 데이터베이스 시스템"이다.

## 핵심 특징

### Bill Inmon의 4가지 정의 (Subject-Oriented, Integrated, Time-Variant, Non-Volatile)

**주제 지향적(Subject-Oriented)**
- 업무 프로세스가 아닌 분석 주제 중심으로 데이터 조직
- 예: 고객, 제품, 판매, 재고 등 비즈니스 주제별 구성
- 운영 DB는 "주문 처리"가 목적이지만, DW는 "판매 분석"이 목적

**통합성(Integrated)**
- 여러 이질적인 소스 시스템의 데이터를 단일 형식으로 통합
- 명명 규칙, 측정 단위, 코드 체계 표준화
- 예: 남성/여성, M/F, Male/Female → 모두 'M'/'F'로 통일

**시간 변동성(Time-Variant)**
- 과거부터 현재까지의 이력 데이터 저장
- 일정 기간(5~10년)의 데이터 유지
- 시간에 따른 트렌드·변화 분석 가능
- 타임스탬프, 유효 기간 등 시간 차원 포함

**비휘발성(Non-Volatile)**
- 데이터 로드 후 수정·삭제 없음 (읽기 전용)
- 안정적이고 일관된 분석 결과 보장
- 주기적 배치 업데이트 (실시간 아님)

### 추가 특징

**쿼리 성능 최적화**
- 인덱싱, 파티셔닝, 집계 테이블 활용
- 컬럼형 스토리지 (Columnar Storage)
- MPP(Massively Parallel Processing) 아키텍처

**대용량 데이터 처리**
- 테라바이트~페타바이트 규모 데이터 저장
- 수억 건의 트랜잭션 이력 분석

**비즈니스 인텔리전스 지원**
- OLAP(Online Analytical Processing)
- 다차원 분석, 드릴다운, 슬라이싱·다이싱
- 대시보드, 보고서 생성

## 데이터 웨어하우스 아키텍처

### 1. 단일 계층 아키텍처 (Single-Tier Architecture)

**구조**
- 데이터 소스 → 데이터 웨어하우스 → BI 도구

**장점**
- 단순한 구조
- 구축 비용 저렴

**단점**
- 성능 제한적
- 복잡한 분석 어려움
- 거의 사용 안 함

### 2. 2계층 아키텍처 (Two-Tier Architecture)

**구조**
```
데이터 소스 → ETL → 데이터 웨어하우스
                           ↓
                      BI/분석 도구
```

**특징**
- ETL 프로세스 분리
- 데이터 정제·변환 단계 명확
- 중소기업에 적합

### 3. 3계층 아키텍처 (Three-Tier Architecture) - 가장 일반적

**구조**
```
하단 계층: 데이터 소스 (OLTP, ERP, CRM, 외부 데이터)
              ↓
중간 계층: 데이터 통합 (ETL/ELT 프로세스)
              ↓
        데이터 웨어하우스 (중앙 저장소)
              ↓
        데이터 마트 (부서별 subset)
              ↓
상단 계층: 프레젠테이션 (BI 도구, 대시보드, 리포트)
```

**계층별 설명**

**하단 계층(Bottom Tier) - 데이터 소스**
- OLTP 시스템 (트랜잭션 처리 DB)
- ERP, CRM, SCM 등 업무 시스템
- 외부 데이터 (소셜 미디어, 시장 데이터)
- 파일 시스템 (CSV, Excel, 로그)

**중간 계층(Middle Tier) - 통합 및 저장**
- ETL/ELT 프로세스
- 데이터 클렌징, 변환, 통합
- 메타데이터 관리
- 데이터 웨어하우스 데이터베이스
- 데이터 마트 (부서별·주제별 서브셋)

**상단 계층(Top Tier) - 프레젠테이션**
- OLAP 큐브
- BI 도구 (Tableau, Power BI, Looker)
- 리포팅 도구
- 데이터 마이닝·분석 도구
- 대시보드·시각화

### 4. 엔터프라이즈 데이터 웨어하우스 (EDW) 아키텍처

**Bill Inmon 방식 (Top-Down)**
```
소스 시스템 → ETL → 정규화된 EDW → 데이터 마트 → BI 도구
```
- 중앙 집중식 데이터 웨어하우스 먼저 구축
- 정규화된 스키마 (3NF)
- 일관성·무결성 최우선
- 구축 기간 길지만 확장성 우수

**Ralph Kimball 방식 (Bottom-Up)**
```
소스 시스템 → ETL → 데이터 마트 (차원 모델링) → 통합 뷰
```
- 부서별 데이터 마트 먼저 구축 후 통합
- 스타 스키마, 스노우플레이크 스키마
- 빠른 구축, 비즈니스 요구 신속 대응
- 중소기업에 적합

## ETL/ELT 프로세스

### ETL (Extract-Transform-Load)

**1. 추출(Extract)**
- 다양한 소스 시스템에서 데이터 추출
- OLTP DB, ERP, CRM, 파일, API 등
- 전체 추출(Full Extract) 또는 증분 추출(Incremental Extract)
- CDC(Change Data Capture)로 변경분만 추출

**2. 변환(Transform)**
- 데이터 클렌징: 중복·결측·오류 제거
- 데이터 표준화: 형식·단위·코드 통일
- 데이터 통합: 여러 소스 병합
- 비즈니스 규칙 적용: 계산 필드, 집계, 파생 변수
- 차원 모델링: 팩트·차원 테이블 생성
- 데이터 품질 검증

**3. 로드(Load)**
- 변환된 데이터를 데이터 웨어하우스에 적재
- 전체 로드(Full Load): 초기 적재 시
- 증분 로드(Incremental Load): 신규·변경 데이터만
- 주기적 배치 작업 (야간, 주말 등)

**ETL 도구**
- Informatica PowerCenter
- IBM DataStage
- Microsoft SSIS
- Talend
- Apache Nifi
- AWS Glue
- Azure Data Factory

### ELT (Extract-Load-Transform)

**차이점**
- 데이터를 원본 형태로 먼저 로드
- 데이터 웨어하우스 내에서 변환 수행
- 클라우드 데이터 웨어하우스의 강력한 컴퓨팅 활용

**장점**
- 빠른 데이터 로딩
- 원시 데이터 보존
- 유연한 변환 (필요 시 재변환 가능)
- 확장성 우수

**단점**
- 데이터 웨어하우스에 부하 증가
- 복잡한 변환 시 성능 저하 가능

**적합한 경우**
- 최신 클라우드 데이터 웨어하우스 사용
- 탄력적 컴퓨팅 확장 가능
- 원시 데이터 탐색 필요
- 타겟 시스템의 네이티브 변환 기능 활용

## 데이터 모델링

### 1. 스타 스키마 (Star Schema)

**구조**
- 중앙에 팩트 테이블(Fact Table)
- 주변에 차원 테이블(Dimension Table)
- 별(Star) 모양

**팩트 테이블**
- 측정 가능한 비즈니스 메트릭 저장
- 예: 판매액, 수량, 이익, 재고량
- 차원 테이블의 외래키 포함
- 대용량 (수백만~수억 행)

**차원 테이블**
- 분석 관점·컨텍스트 제공
- 예: 고객, 제품, 시간, 지역
- 설명적 속성 포함
- 비정규화 (역정규화)
- 상대적으로 작은 크기

**예시**
```
팩트_판매 (판매ID, 날짜키, 고객키, 제품키, 매장키, 판매액, 수량)
         ↓         ↓        ↓        ↓
차원_날짜  차원_고객  차원_제품  차원_매장
```

**장점**
- 단순한 구조, 이해 쉬움
- 빠른 쿼리 성능
- BI 도구와 호환성 우수

**단점**
- 데이터 중복 가능
- 복잡한 관계 표현 어려움

### 2. 스노우플레이크 스키마 (Snowflake Schema)

**구조**
- 스타 스키마의 차원 테이블을 정규화
- 차원이 여러 레벨로 분해
- 눈송이(Snowflake) 모양

**예시**
```
팩트_판매 → 차원_제품 → 차원_제품카테고리 → 차원_제품부서
```

**장점**
- 스토리지 절약 (정규화)
- 데이터 무결성 향상
- 유지보수 용이

**단점**
- 조인 증가로 쿼리 성능 저하
- 복잡한 구조

### 3. 갤럭시 스키마 (Galaxy/Fact Constellation Schema)

**구조**
- 여러 팩트 테이블이 차원 테이블 공유
- 복잡한 비즈니스 프로세스 모델링

**예시**
```
팩트_판매 ←→ 차원_날짜 ←→ 팩트_재고
팩트_판매 ←→ 차원_제품 ←→ 팩트_재고
```

## 주요 구성 요소

### 1. 데이터 소스

**내부 소스**
- OLTP 데이터베이스 (Oracle, MySQL, PostgreSQL)
- ERP 시스템 (SAP, Oracle ERP)
- CRM 시스템 (Salesforce, HubSpot)
- SCM, HRM, 재무 시스템

**외부 소스**
- 소셜 미디어 데이터
- 시장 조사 데이터
- 정부·공공 데이터
- 파트너사 데이터

### 2. 데이터 통합 계층

**ETL/ELT 엔진**
- 데이터 추출, 변환, 로드
- 스케줄링·모니터링

**데이터 품질 관리**
- 검증 규칙
- 오류 처리·로깅
- 데이터 프로파일링

### 3. 데이터 저장 계층

**중앙 데이터 웨어하우스**
- 엔터프라이즈급 DBMS
- MPP 아키텍처
- 컬럼형 스토리지

**데이터 마트**
- 부서별·주제별 서브셋
- 특정 비즈니스 영역 최적화
- 예: 마케팅 마트, 재무 마트, 영업 마트

**스테이징 영역**
- ETL 중간 저장소
- 임시 데이터 보관
- 변환 전후 데이터

### 4. 메타데이터 저장소

**기술적 메타데이터**
- 테이블 스키마, 데이터 타입
- ETL 작업 정의
- 데이터 계보(Lineage)

**비즈니스 메타데이터**
- 데이터 정의, 용어집
- 소유자, 책임자
- 비즈니스 규칙

### 5. 프레젠테이션 계층

**OLAP 서버**
- 다차원 큐브
- 빠른 집계·슬라이싱

**BI 도구**
- 대시보드: Tableau, Power BI, Looker, Qlik
- 리포팅: Crystal Reports, SSRS
- 애드혹 쿼리: SQL 클라이언트

**데이터 분석 도구**
- 통계 분석: R, Python, SAS
- 데이터 마이닝
- 머신러닝

## 주요 활용 사례

### 1. 비즈니스 리포팅

**시나리오**
- 월별·분기별 매출 보고서
- 지역별·제품별 성과 분석
- KPI 대시보드

**방법**
- 정기 배치로 판매 데이터 로드
- 스타 스키마로 모델링
- Power BI로 대시보드 구축

### 2. 트렌드 분석

**시나리오**
- 5년간 매출 추이
- 계절성·패턴 발견
- 전년 대비 성장률

**방법**
- 시계열 데이터 축적
- 날짜 차원 테이블 활용
- 년·분기·월·주·일 계층 분석

### 3. 고객 세그멘테이션

**시나리오**
- RFM(Recency, Frequency, Monetary) 분석
- 고객 생애 가치(CLV) 산출
- 타겟 마케팅

**방법**
- 고객 거래 이력 통합
- 집계 메트릭 계산
- 클러스터링 분석

### 4. 재고 최적화

**시나리오**
- 적정 재고 수준 결정
- 재고 회전율 분석
- 품절·과재고 방지

**방법**
- 판매·재고 데이터 통합
- 재고 팩트 테이블 구축
- 수요 예측 모델 적용

### 5. 재무 분석

**시나리오**
- 손익 분석
- 예산 대비 실적
- 비용 구조 분석

**방법**
- ERP 재무 데이터 추출
- 계정 과목별 집계
- 드릴다운 분석

### 6. 규정 준수 및 감사

**시나리오**
- SOX, IFRS 등 규정 준수
- 내부 감사 지원
- 거래 추적·이력 관리

**방법**
- 완전한 트랜잭션 이력 저장
- 감사 로그 통합
- 규정 리포트 자동 생성

## 클라우드 데이터 웨어하우스

### 주요 플랫폼

**Amazon Redshift**
- MPP 컬럼형 데이터베이스
- S3와 긴밀 통합
- Redshift Spectrum (S3 직접 쿼리)
- RA3 인스턴스 (컴퓨팅·스토리지 분리)

**Google BigQuery**
- 서버리스 데이터 웨어하우스
- 페타바이트 규모 확장
- 종량제 요금 (쿼리한 만큼 과금)
- ML 내장 (BigQuery ML)

**Azure Synapse Analytics**
- 이전 SQL Data Warehouse
- 데이터 웨어하우스 + 데이터 레이크 통합
- Spark 통합
- Power BI 네이티브 통합

**Snowflake**
- 멀티클라우드 (AWS, Azure, GCP)
- 컴퓨팅·스토리지 완전 분리
- 자동 확장·일시 중지
- 제로 카피 클로닝
- 타임 트래블

### 클라우드 DW 장점

**탄력적 확장**
- 수초 내 컴퓨팅 리소스 확장
- 피크 타임만 스케일 업
- 사용한 만큼 과금

**유지보수 부담 감소**
- 서버·스토리지 관리 불필요
- 자동 백업·복구
- 패치·업그레이드 자동

**빠른 구축**
- 인프라 프로비저닝 불필요
- 몇 분 내 DW 생성
- 신속한 PoC

**고급 기능**
- 머신러닝 통합
- 반정형 데이터(JSON) 지원
- 실시간 스트리밍 통합

## OLTP vs OLAP vs 데이터 웨어하우스

| 항목 | OLTP (운영 DB) | OLAP (분석 DB) | 데이터 웨어하우스 |
|------|--------------|--------------|----------------|
| 목적 | 트랜잭션 처리 | 다차원 분석 | 통합·분석·보고 |
| 데이터 유형 | 실시간 운영 데이터 | 집계·요약 데이터 | 이력·통합 데이터 |
| 쿼리 패턴 | 단순·빠른 조회/수정 | 복잡·집계 쿼리 | 복잡한 분석 쿼리 |
| 사용자 | 많은 동시 사용자 | 적은 사용자 | 분석가·경영진 |
| 데이터 양 | 메가바이트~기가바이트 | 기가바이트~테라바이트 | 테라바이트~페타바이트 |
| 정규화 | 정규화 (3NF) | 비정규화 (스타 스키마) | 비정규화 또는 정규화 |
| 업데이트 | 빈번한 읽기/쓰기 | 읽기 전용 또는 주기 업데이트 | 배치 업데이트 |
| 응답 시간 | 밀리초 | 초~분 | 초~분 |
| 백업 주기 | 자주 (시간별) | 덜 자주 (일별) | 주기적 |
| 예시 | 주문 처리, 재고 관리 | 다차원 큐브 | 엔터프라이즈 DW |

## 데이터 웨어하우스의 과제

### 1. 구축·유지 비용

**초기 투자**
- 인프라 구축 (온프레미스)
- 라이선스 비용
- ETL 도구 비용

**운영 비용**
- 인력 (DBA, ETL 개발자, BI 분석가)
- 하드웨어 업그레이드
- 유지보수

**해결책**
- 클라우드 DW로 전환 (OpEx 모델)
- 오픈소스 도구 활용

### 2. 복잡한 ETL 프로세스

**문제**
- 다양한 소스 시스템 통합 어려움
- 데이터 품질 이슈
- 변환 로직 복잡도

**해결책**
- ETL 자동화 도구
- 데이터 품질 프레임워크
- 메타데이터 관리

### 3. 성능 문제

**원인**
- 데이터 규모 증가
- 복잡한 조인·집계
- 동시 사용자 증가

**해결책**
- 파티셔닝 (날짜, 지역 등)
- 인덱싱 전략
- 집계 테이블 (Aggregate Tables)
- 물리적 뷰 (Materialized Views)
- MPP 아키텍처

### 4. 실시간 요구사항

**문제**
- 전통적 DW는 배치 업데이트
- 실시간 인사이트 요구 증가

**해결책**
- 실시간 ETL (Change Data Capture)
- 스트리밍 통합 (Kafka, Kinesis)
- 하이브리드 아키텍처 (OLTP + OLAP)

### 5. 데이터 거버넌스

**과제**
- 데이터 일관성 유지
- 마스터 데이터 관리
- 보안·규정 준수

**해결책**
- 데이터 카탈로그
- 메타데이터 저장소
- 접근 제어·감사

## 모범 사례

### 1. 비즈니스 요구사항 명확화

**초기 단계**
- 주요 이해관계자 인터뷰
- 핵심 KPI 정의
- 보고서·대시보드 요구사항 문서화

### 2. 점진적 구축

**Bottom-Up 접근**
- 우선순위 높은 데이터 마트부터 시작
- 빠른 가치 제공
- 단계적 확장

### 3. 데이터 품질 우선

**품질 검증**
- ETL 단계별 검증
- 데이터 프로파일링
- 이상 탐지·알람

### 4. 메타데이터 관리

**체계적 관리**
- 데이터 사전 작성
- 계보 추적
- 비즈니스 용어집

### 5. 성능 최적화

**설계 단계**
- 적절한 스키마 선택
- 파티셀닝·인덱싱 전략
- 컬럼형 스토리지 활용

### 6. 보안 및 거버넌스

**보안 조치**
- 역할 기반 접근 제어
- 데이터 마스킹
- 암호화 (저장·전송)

**거버넌스**
- 데이터 소유권 명확화
- 변경 관리 프로세스
- 정기 감사

### 7. 자동화

**프로세스 자동화**
- ETL 스케줄링
- 데이터 품질 모니터링
- 알람·알림

### 8. 문서화

**지속적 문서화**
- ETL 프로세스 문서
- 데이터 모델 다이어그램
- 운영 매뉴얼

## 요약

데이터 웨어하우징은 조직의 다양한 운영 시스템에서 정형 데이터를 추출·변환·통합하여 주제 지향적이고 시간 변동적이며 비휘발적인 중앙 저장소를 구축하고, BI·분석·의사결정을 지원하는 전체 프로세스를 의미한다. 3계층 아키텍처(데이터 소스 → ETL/ELT → 데이터 웨어하우스 → BI 도구)를 통해 OLTP 시스템의 원시 데이터를 추출하고, 클렌징·표준화·통합 변환을 거쳐 스타 스키마 또는 스노우플레이크 스키마로 모델링한 뒤, 팩트·차원 테이블로 구성된 읽기 최적화 저장소에 적재한다. 비즈니스 리포팅, 트렌드 분석, 고객 세그멘테이션, 재무 분석, 규정 준수 등 다양한 용도로 활용되며, 최근에는 Redshift, BigQuery, Snowflake, Synapse Analytics 같은 클라우드 데이터 웨어하우스가 탄력적 확장·서버리스·멀티클라우드 지원으로 주목받고 있다. 성공적 운영을 위해서는 비즈니스 요구사항 명확화, 점진적 구축, 데이터 품질 관리, 메타데이터 거버넌스, 성능 최적화, 보안·규정 준수, ETL 자동화가 필수적이다.
