# AWS S3란?

## 개념 정의

AWS S3(Simple Storage Service)는 업계 최고 수준의 확장성과 내구성을 제공하는 객체 스토리지 서비스다. 파일을 버킷(Bucket)에 객체(Object)로 저장하며, 99.999999999%(11 9's) 내구성과 무제한 확장성을 제공하고, 정적 웹사이트 호스팅, 백업, 빅데이터 분석, 데이터 레이크 등 다양한 용도로 사용된다.

쉽게 말해 "무제한으로 파일을 저장할 수 있는 클라우드 저장소로, 자동으로 백업되고 전 세계 어디서든 접근 가능한 파일 서버"다.

## 핵심 기능

- 무제한 확장성 (용량 제한 없음)
- 99.999999999% 내구성 (11 9's)
- 버전 관리 및 복제
- 정적 웹사이트 호스팅
- 다양한 스토리지 클래스 (비용 최적화)
- 이벤트 알림 (Lambda, SNS, SQS 트리거)
- 강력한 보안 및 암호화

## 주요 구성 요소

**버킷(Bucket)**
- 객체를 저장하는 최상위 컨테이너
- 전 세계에서 고유한 이름 필요
- 리전 단위로 생성
- 버킷 정책으로 접근 제어

**객체(Object)**
- 실제 저장되는 파일 (최대 5TB)
- Key (파일 경로), Value (데이터), Metadata, Version ID로 구성
- 고유한 URL로 접근 가능

**키(Key)**
- 버킷 내 객체의 고유 식별자
- 파일 경로 역할 (예: folder/subfolder/file.txt)
- 폴더 구조처럼 보이지만 실제로는 평면 구조

**버전 관리(Versioning)**
- 동일 객체의 여러 버전 보존
- 실수로 삭제해도 복구 가능
- Version ID로 특정 버전 접근

**메타데이터**
- 객체에 대한 추가 정보 (Content-Type, 사용자 정의 태그 등)
- 시스템 정의 메타데이터와 사용자 정의 메타데이터

## S3 스토리지 클래스

### S3 Standard
- 자주 접근하는 데이터용
- 밀리초 지연시간
- 99.99% 가용성
- 3개 이상 AZ에 복제

### S3 Intelligent-Tiering
- 접근 패턴이 불확실한 데이터
- 자동으로 계층 이동 (비용 최적화)
- 모니터링 비용 추가

### S3 Standard-IA (Infrequent Access)
- 자주 접근하지 않지만 빠른 접근 필요
- 저장 비용 낮음, 검색 비용 높음
- 최소 30일 보관 필요

### S3 One Zone-IA
- 단일 AZ 저장 (비용 더 낮음)
- 재생성 가능한 데이터에 적합
- 99.5% 가용성

### S3 Glacier Instant Retrieval
- 분기별 접근하는 아카이브 데이터
- 밀리초 검색 시간
- 최소 90일 보관

### S3 Glacier Flexible Retrieval
- 1년에 1-2회 접근하는 백업 데이터
- 검색 시간: 1분~12시간 (옵션별)
- 최소 90일 보관

### S3 Glacier Deep Archive
- 장기 보관 데이터 (7-10년 이상)
- 최저 비용 ($0.00099/GB/월)
- 검색 시간: 12-48시간
- 최소 180일 보관

## 주요 기능

### 버전 관리
파일 수정/삭제 시 이전 버전을 보존하며, 실수로 삭제해도 복구할 수 있다.

### 복제(Replication)
- Cross-Region Replication (CRR): 다른 리전으로 자동 복제
- Same-Region Replication (SRR): 동일 리전 내 복제

### 정적 웹사이트 호스팅
HTML, CSS, JS 파일을 S3에 업로드하여 정적 웹사이트를 호스팅하며, CloudFront와 함께 사용해 글로벌 CDN 구축이 가능하다.

### 수명 주기 정책(Lifecycle Policy)
특정 기간 후 자동으로 스토리지 클래스를 전환하거나 삭제한다. 예: 30일 후 Standard → IA, 90일 후 Glacier로 이동

### 이벤트 알림
객체 생성/삭제 시 Lambda, SNS, SQS로 자동 알림을 보내며, 이미지 업로드 시 자동 썸네일 생성 같은 워크플로우를 구현한다.

### 암호화
- 전송 중 암호화: HTTPS/TLS
- 저장 중 암호화: SSE-S3 (S3 관리), SSE-KMS (KMS 키), SSE-C (고객 키)
- 버킷 기본 암호화 설정 가능

### 접근 제어
- IAM Policy: 사용자/역할 기반 권한
- Bucket Policy: 버킷 레벨 권한 (JSON)
- ACL: 객체 레벨 권한 (Legacy)
- Pre-signed URL: 임시 접근 링크 생성

### S3 Transfer Acceleration
CloudFront Edge Location을 통해 업로드 속도를 높이며, 멀리 떨어진 리전으로 빠른 전송이 가능하다.

### S3 Select
SQL 쿼리로 객체 내용을 필터링하여 일부만 가져오며, 전체 파일 다운로드 없이 필요한 데이터만 추출한다.

### S3 Batch Operations
수백만 객체를 일괄 처리하며, 태그 추가, 복사, 암호화 등을 대규모로 수행한다.

## 주요 활용 사례

**백업 및 복원**
데이터베이스 백업, 로그 파일, 스냅샷을 S3에 저장하며, 높은 내구성으로 안전하게 보관한다.

**데이터 레이크**
원본 데이터를 S3에 저장하고 Athena, Redshift Spectrum, EMR로 분석하며, 빅데이터 분석 플랫폼의 중앙 저장소 역할을 한다.

**정적 웹사이트 호스팅**
HTML/CSS/JS 파일을 S3에 업로드하여 웹사이트를 호스팅하며, CloudFront로 글로벌 배포가 가능하다.

**미디어 저장 및 스트리밍**
이미지, 동영상, 오디오 파일을 저장하고 CloudFront로 배포하며, 콘텐츠 관리 시스템(CMS)의 저장소로 사용한다.

**재해 복구**
CRR로 다른 리전에 자동 복제하여 재해 복구 전략을 구축하며, 지역 장애 시에도 데이터를 보호한다.

**머신러닝 데이터셋**
학습 데이터를 S3에 저장하고 SageMaker, EMR로 처리하며, 페타바이트급 데이터셋을 관리한다.

**IoT 데이터 수집**
IoT 디바이스의 센서 데이터를 S3에 저장하고 실시간 분석을 수행하며, Kinesis Firehose로 자동 저장한다.

**로그 저장**
CloudTrail, VPC Flow Logs, ALB Access Logs를 중앙 집중 저장하며, Athena로 쿼리해 보안 분석을 수행한다.

## 통합 서비스

- Amazon CloudFront: CDN으로 글로벌 배포
- AWS Lambda: 이벤트 기반 자동화
- Amazon Athena: SQL로 S3 데이터 쿼리
- AWS Glue: ETL 작업
- Amazon EMR: 빅데이터 처리
- Amazon SageMaker: 머신러닝 데이터 저장
- AWS DataSync: 온프레미스 데이터 마이그레이션
- AWS Backup: 중앙 백업 관리
- Amazon Kinesis Firehose: 스트리밍 데이터 저장

## S3 vs EBS vs EFS

| 항목 | S3 | EBS | EFS |
|------|-----|-----|-----|
| 유형 | 객체 스토리지 | 블록 스토리지 | 파일 스토리지 |
| 접근 | HTTP/HTTPS | EC2 직접 연결 | NFS 프로토콜 |
| 확장성 | 무제한 | 16TB까지 | 페타바이트 |
| 동시 접근 | 무제한 | 단일 인스턴스 | 수천 인스턴스 |
| 사용 사례 | 백업, 웹 호스팅 | EC2 부팅 볼륨 | 공유 파일 시스템 |
| 가격 | 매우 낮음 | 중간 | 높음 |

## 모범 사례

**적절한 스토리지 클래스 선택**
접근 빈도에 따라 Standard, IA, Glacier를 선택하며, Intelligent-Tiering으로 자동 최적화를 활용한다.

**수명 주기 정책 설정**
30일 후 IA로, 90일 후 Glacier로 자동 전환하여 비용을 절감한다.

**버전 관리 활성화**
중요 데이터는 버전 관리를 활성화하여 실수 삭제를 방지하고, MFA Delete로 추가 보호한다.

**암호화 활성화**
기본 암호화를 활성화하고, 민감 데이터는 KMS로 관리한다.

**접근 제어 강화**
버킷 정책으로 퍼블릭 접근을 차단하고, IAM으로 최소 권한 원칙을 적용한다.

**CRR로 재해 복구**
중요 데이터는 다른 리전으로 자동 복제하여 지역 장애에 대비한다.

**S3 Access Logs 활성화**
버킷 접근 로그를 수집하여 보안 감사를 수행한다.

**CloudFront 통합**
정적 콘텐츠는 CloudFront로 캐싱하여 지연시간을 줄이고 비용을 절감한다.

**태그 관리**
비용 추적과 자동화를 위해 일관된 태그 전략을 적용한다.

## 제약 사항

**버킷 이름 고유성**
전 세계적으로 고유해야 하며, 변경 불가능하다.

**객체 크기 제한**
단일 객체 최대 5TB이며, 5GB 이상은 멀티파트 업로드를 사용해야 한다.

**일관성 모델**
2020년 12월 이후 강력한 일관성을 제공하지만, 이전에는 최종 일관성이었다.

**삭제 지연**
대량 삭제 시 처리에 시간이 걸릴 수 있다.

## 비용

- 저장 비용: GB당 월 비용 (클래스별 차등)
- 요청 비용: PUT/GET/LIST 요청 횟수당
- 데이터 전송: 아웃바운드 트래픽 비용 (인바운드 무료)
- 관리 비용: 버전 관리, 복제, 분석 등 추가 기능

Standard: $0.023/GB/월, Glacier Deep Archive: $0.00099/GB/월

## 요약

AWS S3는 99.999999999% 내구성을 제공하는 무제한 객체 스토리지로, 버킷과 객체로 데이터를 저장하며, Standard, IA, Glacier 등 8가지 스토리지 클래스로 비용을 최적화하고, 버전 관리, 복제, 정적 웹사이트 호스팅, 이벤트 알림, 암호화를 지원하며, 수명 주기 정책으로 자동 계층 전환이 가능하고, 백업, 데이터 레이크, 웹 호스팅, 머신러닝, IoT 데이터 저장에 최적화되어 있으며, CloudFront, Lambda, Athena와 통합하여 다양한 워크로드를 구현한다.
