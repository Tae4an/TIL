# AWS Lambda란?

## Lambda의 기본 정의

**AWS Lambda는 Amazon Web Services에서 제공하는 서버리스 컴퓨팅 서비스다**. 서버를 프로비저닝하거나 관리할 필요 없이 코드를 실행할 수 있게 해주는 완전 관리형 컴퓨팅 서비스다.

**간단히 말해서, 서버를 전혀 신경 쓰지 않고 코드만 업로드하면 AWS가 알아서 실행해주는 서비스다**. 마치 택배를 보낼 때 택배회사의 트럭이나 배송 시스템을 신경 쓰지 않고 물건만 맡기는 것과 같은 개념이다.

## 서버리스(Serverless)의 의미

## 서버가 없다는 뜻이 아니다

**서버리스는 서버가 아예 없다는 의미가 아니라, 개발자가 서버를 관리하지 않아도 된다는 뜻이다**:

| 전통적 방식 | 서버리스 (Lambda) |
| --- | --- |
| 서버 구매/임대 필요 | 서버 관리 불필요 |
| OS 설치 및 관리 | AWS가 모든 인프라 관리 |
| 소프트웨어 업데이트 | 자동 패치 및 업데이트 |
| 24시간 서버 운영 | 코드 실행할 때만 동작 |
| 고정 비용 지불 | 실행한 만큼만 과금 |

## 일상생활 비유

**Lambda를 전기 서비스에 비유하면 쉽게 이해할 수 있다**:

- 전통적 서버: 자가발전기 구매해서 집에 설치하고 직접 관리
- Lambda: 전력회사에서 제공하는 전기를 스위치 켤 때만 사용하고 사용량만큼 요금 지불

## Lambda의 작동 원리

## 이벤트 기반 실행

**Lambda는 특정 이벤트가 발생했을 때만 코드가 실행된다**:

```json
이벤트 발생 → Lambda 함수 트리거 → 코드 실행 → 결과 반환 → 종료
```

## 주요 트리거 소스

| 트리거 | 설명 | 예시 |
| --- | --- | --- |
| **API Gateway** | HTTP 요청 | 웹 API 호출 시 실행 |
| **S3** | 파일 업로드/삭제 | 이미지 업로드 시 썸네일 생성 |
| **DynamoDB** | 데이터 변경 | 테이블 데이터 변경 시 로그 기록 |
| **CloudWatch** | 스케줄 | 매일 오전 9시 보고서 생성 |
| **SNS/SQS** | 메시지 수신 | 알림 메시지 처리 |
| **Kinesis** | 스트림 데이터 | 실시간 데이터 분석 |

## 실제 활용 사례

## 1. 이미지 처리 자동화

**사진 업로드 시 자동 썸네일 생성**:

1. 사용자가 S3 버킷에 원본 이미지 업로드
2. S3 이벤트가 Lambda 함수 트리거
3. Lambda가 이미지를 다운로드하여 썸네일 생성
4. 생성된 썸네일을 다른 S3 버킷에 저장
5. 완료 알림을 사용자에게 전송

## 2. 서버리스 웹 API

**온라인 쇼핑몰의 상품 조회 API**:

- API Gateway에서 HTTP 요청 수신
- Lambda 함수가 데이터베이스에서 상품 정보 조회
- JSON 형태로 결과 반환
- 요청이 없으면 서버 비용 0원

## 3. 데이터 백업 자동화

**데이터베이스 자동 백업 시스템**:

- CloudWatch Events로 매일 새벽 2시에 트리거
- Lambda가 RDS 스냅샷 생성
- 오래된 백업 파일 자동 삭제
- 백업 완료 알림 이메일 발송

## 4. 실시간 데이터 처리

**IoT 센서 데이터 처리**:

- IoT 디바이스에서 온도 데이터 전송
- Kinesis를 통해 Lambda로 실시간 전달
- 온도가 임계값 초과 시 알람 발송
- 처리된 데이터를 DynamoDB에 저장

## Lambda의 주요 특징

## 1. 다양한 언어 지원

**주요 프로그래밍 언어 런타임 제공**:

| 언어 | 버전 | 특징 |
| --- | --- | --- |
| **Python** | 3.9, 3.10, 3.11 | 가장 인기 있는 언어, 풍부한 라이브러리 |
| **Node.js** | 16.x, 18.x | 빠른 실행, JSON 처리 최적화 |
| **Java** | 8, 11, 17 | 엔터프라이즈 환경, 안정성 |
| **Go** | 1.x | 빠른 성능, 낮은 메모리 사용 |
| **C#** | .NET 6 | Windows 환경과 연동 |
| **Ruby** | 2.7, 3.0 | 웹 개발 친화적 |

## 2. 자동 스케일링

**트래픽에 따라 자동으로 확장/축소**:

- 동시 실행: 최대 1,000개 함수 (기본값)
- 요청 증가 시 자동으로 인스턴스 추가
- 요청 감소 시 자동으로 인스턴스 감소
- 0에서 수천 개까지 순간적 확장 가능

## 3. 내장된 모니터링

**CloudWatch와 자동 통합**:

- 실행 횟수, 에러율, 실행 시간 자동 수집
- 로그 자동 기록 및 저장
- 커스텀 메트릭 추가 가능
- X-Ray를 통한 분산 추적

## Lambda의 실행 환경

## 콜드 스타트와 웜 스타트

**Lambda 함수 실행 시 발생하는 두 가지 상황**:

| 구분 | 콜드 스타트 | 웜 스타트 |
| --- | --- | --- |
| **상황** | 처음 실행 또는 오랫동안 미사용 | 최근에 실행된 적 있음 |
| **초기화 시간** | 100ms~수 초 | 거의 없음 |
| **성능** | 상대적으로 느림 | 빠름 |
| **대응 방법** | Provisioned Concurrency 사용 | 주기적 호출로 웜업 유지 |

## 실행 제한

**Lambda 함수의 기술적 제한사항**:

- **실행 시간**: 최대 15분
- **메모리**: 128MB ~ 10,240MB (10GB)
- **임시 디스크**: /tmp 디렉토리 512MB ~ 10GB
- **환경 변수**: 4KB 제한
- **패키지 크기**: 압축된 상태 50MB, 압축 해제 시 250MB

## 비용 구조

## 요금 체계

**사용량 기반 과금으로 매우 경제적**:

| 항목 | 무료 제공 | 추가 비용 |
| --- | --- | --- |
| **요청 횟수** | 월 100만 건 | 100만 건당 $0.20 |
| **실행 시간** | 40만 GB-초 | GB-초당 $0.0000166667 |
| **Provisioned Concurrency** | - | GB당 시간당 $0.0000041667 |

## 비용 예시

**실제 비용 계산 사례**:

- 월 500만 회 실행
- 평균 실행 시간 200ms
- 메모리 512MB 사용

**계산**:

- 요청 비용: (500만 - 100만) × $0.20 ÷ 100만 = $0.80
- 실행 시간 비용: (500만 × 0.2초 × 0.5GB - 40만) × $0.0000166667 = $0.83
- **총 월 비용: $1.63**

## Lambda vs 다른 컴퓨팅 서비스

## AWS 컴퓨팅 서비스 비교

| 서비스 | Lambda | EC2 | Fargate |
| --- | --- | --- | --- |
| **관리 수준** | 완전 관리형 | 직접 관리 | 컨테이너 관리형 |
| **과금 방식** | 실행 시간만 | 24시간 고정 | 실행 시간 |
| **확장성** | 자동 무제한 | 수동/Auto Scaling | 자동 확장 |
| **적합한 용도** | 단발성 작업, 이벤트 처리 | 장기 실행, 복잡한 애플리케이션 | 컨테이너 애플리케이션 |
| **콜드 스타트** | 있음 | 없음 | 있지만 적음 |

## Lambda 개발 및 배포

## 개발 환경

**Lambda 함수 개발 방법**:

- **AWS 콘솔**: 브라우저에서 직접 코드 작성
- **AWS CLI**: 명령줄에서 배포 및 관리
- **AWS SAM**: Infrastructure as Code로 리소스 정의
- **Serverless Framework**: 서드파티 배포 도구
- **IDE 플러그인**: VS Code, IntelliJ 등에서 직접 개발

## 배포 패턴

**Blue/Green 배포**:

- 새 버전을 점진적으로 배포
- 문제 발생 시 즉시 롤백 가능
- Alias와 Weighted routing 활용

**카나리 배포**:

- 트래픽의 일정 비율만 새 버전으로 라우팅
- 안전한 새 기능 출시

## Lambda 모범 사례

## 성능 최적화

**콜드 스타트 최소화**:

- 불필요한 라이브러리 import 제거
- 전역 변수 활용으로 초기화 비용 절약
- Connection pool 재사용

**메모리 최적화**:

- 적절한 메모리 크기 설정 (더 많은 메모리 = 더 빠른 CPU)
- CloudWatch 메트릭으로 최적 메모리 크기 파악

## 보안 강화

**IAM 역할 최소화**:

- 함수별 필요한 최소한의 권한만 부여
- 리소스별 세밀한 접근 제어

**환경 변수 암호화**:

- 민감한 정보는 KMS로 암호화
- Parameter Store나 Secrets Manager 활용

## 오류 처리

**재시도 및 DLQ 설정**:

- 실패한 함수 자동 재시도
- 최종 실패 시 Dead Letter Queue로 전송
- 알람 설정으로 장애 즉시 감지

## Lambda의 제한사항과 고려사항

## 적합하지 않은 용도

**Lambda 사용을 피해야 하는 경우**:

- **장기 실행 작업**: 15분 초과 작업
- **대용량 파일 처리**: 메모리/디스크 제한
- **실시간 게임**: 콜드 스타트 지연
- **지속적 연결**: WebSocket 등 상태 유지 필요
- **대용량 데이터베이스**: 메모리 집약적 작업

## 대안 고려

**Lambda 한계 상황의 대체 서비스**:

- 장기 작업: EC2, ECS, Batch
- 실시간 처리: Kinesis Analytics
- 상태 유지: ElastiCache, DynamoDB
- 복잡한 워크플로: Step Functions

## Lambda의 미래와 발전

## 새로운 기능들

**지속적으로 추가되는 기능**:

- **Container Image 지원**: Docker 이미지로 함수 패키징
- **ARM 프로세서**: Graviton2 기반으로 비용 절약
- **Lambda Extensions**: 모니터링, 보안 도구 통합
- **Response Streaming**: 실시간 응답 스트리밍

## 생태계 확장

**서버리스 생태계의 중심**:

- API Gateway와 완벽 통합
- Step Functions로 복잡한 워크플로 구성
- EventBridge로 이벤트 기반 아키텍처 구축
- 서드파티 도구들의 Lambda 지원 확대

AWS Lambda는 **현대 클라우드 애플리케이션 개발의 패러다임을 바꾼 혁신적인 서비스**다. 서버 관리의 복잡함 없이 비즈니스 로직에만 집중할 수 있게 해주며, 사용한 만큼만 지불하는 경제적인 모델로 스타트업부터 대기업까지 널리 활용되고 있다. 적절한 사용 사례를 파악하고 모범 사례를 따른다면 매우 효율적이고 확장 가능한 애플리케이션을 구축할 수 있는 강력한 도구다.
