# AWS KMS란?

## 개념 정의

AWS KMS(AWS Key Management Service)는 데이터를 암호화·복호화하는 데 쓰이는 **암호화 키**를 안전하게 생성·저장·관리하는 완전관리형 서비스다. KMS 키(과거 CMK)는 FIPS 140-2 검증된 HSM(하드웨어 보안 모듈) 안에 평문으로 절대 외부 노출 없이 보관되며, S3, EBS, RDS 등 AWS 서비스와 통합해 데이터를 암호화하고, CloudTrail 로깅으로 키 사용 이력을 추적할 수 있다.

쉽게 말해, "데이터 암호화에 필요한 열쇠를 만들고 안전하게 보관해 주며, AWS 서비스나 애플리케이션이 필요할 때 암호화·복호화 요청을 처리하는 중앙 키 금고"다.

## 핵심 기능

- **키 생성 및 관리**  
  대칭 키(AES-256) 및 비대칭 키(RSA, ECC) 생성, 자동 또는 수동 키 로테이션, 키 비활성화·삭제.

- **암호화·복호화 작업**  
  Encrypt, Decrypt, GenerateDataKey API로 데이터 암호화·복호화 수행, 키는 항상 HSM 안에서만 사용되어 평문 노출 없음.

- **AWS 서비스 통합**  
  S3, EBS, RDS, DynamoDB, Secrets Manager, Lambda, CloudTrail 등 100개 이상의 AWS 서비스에서 KMS를 기본 암호화 옵션으로 지원.

- **세밀한 접근 제어**  
  Key Policy(리소스 기반 정책) + IAM 정책으로 누가 어떤 키를 사용할 수 있는지 제어, 크로스 계정 키 공유 가능.

- **감사 및 로깅**  
  CloudTrail 통합으로 모든 키 사용(언제, 누가, 어떤 키로 암호화·복호화했는지) 이력 기록, 규정 준수(PCI DSS, HIPAA, GDPR) 지원.

- **Multi-Region Keys**  
  동일한 키 ID·키 구성을 여러 리전에 복제해 재해 복구·글로벌 서비스 암호화 지원.

## 키 유형

- **AWS 관리형 키(AWS Managed Keys, `aws/*`)**  
  AWS 서비스가 자동으로 생성·관리, 사용자 개입 불필요, 무료, 예: `aws/s3`, `aws/ebs`.

- **고객 관리형 키(Customer Managed Keys, CMK)**  
  사용자가 직접 생성·관리, 키 정책·로테이션·삭제 제어 가능, 유료, 세밀한 권한 제어 가능.

- **AWS 소유 키(AWS Owned Keys)**  
  AWS가 여러 계정에서 공유·사용, 사용자에게 보이지 않고 직접 관리 불가, 무료.

## 주요 활용 사례

- **S3 버킷·객체 암호화**  
  S3 SSE-KMS(서버 측 암호화)로 업로드 시 자동 암호화, 버킷 키(Bucket Key)로 KMS API 호출 비용 절감.

- **EBS 볼륨·스냅샷 암호화**  
  EC2 인스턴스의 루트·데이터 볼륨을 KMS로 암호화, 스냅샷도 자동 암호화 유지.

- **RDS 데이터베이스 암호화**  
  RDS/Aurora 인스턴스 생성 시 KMS 키 지정, 저장 데이터·백업·스냅샷·복제본 모두 암호화.

- **Secrets Manager·Parameter Store**  
  API 키, DB 비밀번호, 인증서를 KMS로 암호화해 안전하게 저장, 애플리케이션이 런타임에 복호화해 사용.

- **Lambda 환경 변수 암호화**  
  Lambda 함수의 민감한 환경 변수를 KMS로 암호화, 함수 실행 시 복호화.

- **크로스 계정 데이터 공유**  
  A 계정에서 KMS로 암호화한 S3 객체나 EBS 스냅샷을 B 계정에 공유, Key Policy로 B 계정에 복호화 권한 부여.

- **재해 복구·멀티 리전 암호화**  
  Multi-Region Key로 동일한 키를 여러 리전에서 사용, 리전 장애 시에도 암호화된 데이터 복구 가능.
