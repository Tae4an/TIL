# AWS RAM란?

## 개념 정의

AWS RAM(Resource Access Manager)은 AWS 리소스를 다른 AWS 계정, 조직 단위(OU), 조직 전체와 안전하게 공유할 수 있는 서비스다. 리소스를 한 번 생성하면 여러 계정에서 마치 자신의 리소스처럼 사용할 수 있으며, 중복 리소스 프로비저닝 없이 중앙 집중식으로 관리하고 비용을 절감한다. VPC 서브넷, Transit Gateway, Route 53 Resolver Rules 등 50개 이상의 AWS 리소스 유형을 지원한다.

쉽게 말해 "한 계정에서 만든 VPC나 Transit Gateway를 다른 계정에서도 쓸 수 있게 공유하는 도구로, 중복 생성 없이 여러 계정이 함께 사용하는 서비스"다.

## 핵심 특징

- 리소스 중복 제거 (한 번 생성, 여러 계정 사용)
- 중앙 집중식 관리
- 세밀한 접근 제어
- AWS Organizations 통합
- 비용 절감
- 무료 서비스 (리소스 비용만 발생)

## 주요 구성 요소

**Resource Share (리소스 공유)**
- 공유할 리소스와 대상을 정의하는 논리적 컨테이너
- 이름, 공유 리소스, 공유 대상(Principal)으로 구성
- 여러 리소스와 대상을 하나의 공유로 그룹화

**Resource Owner (리소스 소유자)**
- 리소스를 생성하고 공유하는 계정
- 리소스의 수명 주기 관리 (생성, 수정, 삭제)
- 공유 설정 제어

**Principal (공유 대상)**
- 리소스를 공유받는 엔티티
- AWS 계정, 조직, OU, IAM 역할, IAM 사용자
- 공유 초대 수락 후 사용 가능

**Managed Permission (관리형 권한)**
- 공유 리소스에 대한 사전 정의된 권한 세트
- AWS가 자동으로 생성 및 관리
- 리소스 유형별로 최소 권한 적용

## 공유 가능한 주요 리소스

### 네트워킹
- **VPC 서브넷**: 여러 계정이 동일 VPC에 리소스 배치
- **Transit Gateway**: 중앙 허브로 여러 VPC 연결
- **Route 53 Resolver Rules**: DNS 해석 규칙 공유
- **Network Firewall**: 방화벽 정책 공유

### 보안
- **ACM Private CA**: 프라이빗 인증서 발급 기관
- **Systems Manager Incident Manager**: 인시던트 대응 계획

### 컴퓨팅
- **EC2 Dedicated Hosts**: 전용 호스트 공유
- **EC2 Capacity Reservations**: 용량 예약 공유
- **EC2 Image Builder**: 이미지 빌드 파이프라인

### 데이터베이스
- **Aurora DB Clusters**: 클러스터 공유
- **RDS Snapshots**: 스냅샷 공유

### 기타
- **License Manager Configurations**: 라이선스 구성
- **AWS Glue Data Catalog**: 데이터 카탈로그
- **AWS Resource Groups**: 리소스 그룹

## 작동 방식

### 조직 내 공유 (권장)
1. **Organizations 통합 활성화**: AWS Organizations에서 RAM 신뢰 활성화
2. **리소스 공유 생성**: 공유할 리소스와 대상 OU/계정 선택
3. **자동 공유**: 초대 없이 즉시 공유 완료
4. **리소스 사용**: 대상 계정에서 즉시 리소스 사용 가능

### 조직 외부 공유
1. **리소스 공유 생성**: 공유할 리소스와 대상 계정 ID 입력
2. **초대 전송**: 대상 계정에 공유 초대 발송
3. **초대 수락**: 대상 계정에서 초대 수락
4. **리소스 사용**: 수락 후 리소스 접근 가능

### 권한 모델
- **소유자**: 리소스 생성, 수정, 삭제, 공유 관리
- **참여자**: 리소스 사용, 하위 리소스 생성 (예: 서브넷에 EC2 배치)
- **참여자는 공유 리소스를 수정/삭제할 수 없음**

## 주요 활용 사례

**중앙 집중식 네트워킹**
네트워크 팀이 중앙 VPC와 서브넷을 생성하고 애플리케이션 계정에 공유하며, 각 팀이 공유 서브넷에 EC2, RDS를 배포하고, Transit Gateway로 하이브리드 연결을 중앙 관리한다.

**멀티 계정 보안**
보안 팀이 Network Firewall, Resolver Rules를 생성하고 모든 계정에 공유하며, ACM Private CA를 중앙에서 관리하여 인증서를 통합 발급한다.

**비용 최적화**
EC2 Dedicated Hosts를 공유하여 라이선스 비용을 절감하고, Capacity Reservations를 여러 계정이 활용하며, License Manager로 라이선스를 통합 관리한다.

**데이터 공유**
데이터 팀이 Aurora Cluster, Glue Data Catalog를 공유하고, 분석 팀이 공유 데이터베이스에 직접 접근하며, 중복 데이터 복제 없이 협업한다.

**재해 복구**
프로덕션 계정의 RDS 스냅샷을 DR 계정에 공유하고, 재해 발생 시 DR 계정에서 즉시 복원하며, AMI를 공유하여 일관된 환경을 구축한다.

## 통합 서비스

- AWS Organizations: 조직 단위 공유
- Amazon VPC: 서브넷, Transit Gateway 공유
- Amazon Route 53: Resolver Rules 공유
- AWS License Manager: 라이선스 공유
- AWS Glue: Data Catalog 공유
- AWS CloudTrail: 공유 활동 감사
- AWS IAM: 접근 제어
- Amazon CloudWatch: 모니터링

## RAM vs 기존 공유 방법

| 항목 | AWS RAM | 계정 간 권한 부여 | VPC Peering |
|------|---------|-----------------|-------------|
| 리소스 위치 | 소유자 계정 | 소유자 계정 | 각 계정에 VPC |
| 관리 복잡도 | 낮음 (중앙 관리) | 높음 (각 계정 설정) | 중간 (N:N 연결) |
| 비용 | 무료 | 무료 | 데이터 전송 비용 |
| IP 중복 | 없음 (같은 VPC) | 해당 없음 | 발생 가능 |
| 확장성 | 높음 | 제한적 | 제한적 |
| 보안 제어 | 세밀한 권한 | IAM 정책 | Security Group |

## VPC 서브넷 공유 예시

### 소유자 계정 (네트워크 팀)
1. VPC 생성 (10.0.0.0/16)
2. 서브넷 생성 (10.0.1.0/24, 10.0.2.0/24)
3. RAM에서 서브넷을 애플리케이션 계정과 공유

### 참여자 계정 (애플리케이션 팀)
1. VPC 콘솔에서 공유 서브넷 확인
2. 공유 서브넷에 EC2 인스턴스 배치
3. 소유자 계정의 라우팅 테이블, NACL 자동 적용
4. 자체 Security Group 생성 및 관리

### 제약 사항
- 참여자는 서브넷, 라우팅 테이블, NACL 수정 불가
- 참여자는 자신이 생성한 리소스(EC2, RDS)만 삭제 가능
- 소유자는 모든 참여자의 리소스 조회 가능

## 모범 사례

**Organizations 통합 활성화**
조직 내 공유는 초대 없이 즉시 적용되므로, RAM과 Organizations를 통합하여 관리 부담을 줄인다.

**중앙 집중식 공유 계정**
네트워크, 보안 리소스를 전담 계정에서 관리하고 공유하며, 역할 분리로 보안을 강화한다.

**명확한 명명 규칙**
Resource Share 이름에 목적을 명시하며, 예: "Shared-Prod-VPC-Subnets"

**태그 기반 관리**
공유 리소스와 Resource Share에 일관된 태그를 적용하여 비용 추적과 관리를 체계화한다.

**최소 권한 원칙**
필요한 계정과 리소스만 공유하며, 과도한 공유를 피한다.

**CloudTrail 감사**
RAM API 호출을 CloudTrail로 추적하고, 공유 변경 이력을 모니터링한다.

**정기 검토**
사용하지 않는 공유를 주기적으로 제거하고, 공유 대상 계정을 검토한다.

**문서화**
공유 아키텍처와 소유권을 문서화하여 팀 간 혼선을 방지한다.

## 제약 사항

**리소스 타입 제한**
모든 AWS 리소스를 공유할 수 있는 것은 아니며, 지원되는 리소스 유형만 가능하다.

**리전 제한**
대부분 리소스는 동일 리전 내에서만 공유 가능하며, 크로스 리전 공유가 제한적이다.

**소유권 변경 불가**
공유 리소스의 소유권을 참여자에게 이전할 수 없으며, 소유자만 수명 주기를 관리한다.

**참여자 권한 제한**
참여자는 하위 리소스만 생성 가능하며, 공유 리소스 자체를 수정/삭제할 수 없다.

**초대 만료**
조직 외부 공유는 초대 수락이 필요하며, 7일 후 만료된다.

## 비용

AWS RAM 서비스 자체는 무료다. 공유 리소스의 사용 비용만 발생하며, 일반적으로 소유자 계정에 청구된다. 단, EC2 인스턴스처럼 참여자가 생성한 리소스는 참여자 계정에 청구된다.

## 요약

AWS RAM(Resource Access Manager)은 AWS 리소스를 다른 계정, OU, 조직과 안전하게 공유하는 서비스로, 리소스를 한 번 생성하면 여러 계정이 마치 자신의 것처럼 사용할 수 있으며, VPC 서브넷, Transit Gateway, Route 53 Resolver Rules, ACM Private CA 등 50개 이상의 리소스 유형을 지원하고, AWS Organizations 통합 시 초대 없이 자동 공유되며, 소유자는 리소스 수명 주기를 관리하고 참여자는 하위 리소스만 생성 가능하며, 중앙 집중식 네트워킹, 멀티 계정 보안, 비용 최적화, 데이터 공유, 재해 복구에 최적화되어 있고, 중복 리소스 제거로 운영 오버헤드를 줄이고 일관된 보안 정책을 적용할 수 있으며, 서비스 자체는 무료이다.
