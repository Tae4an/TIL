# AWS DataSync란?

## 개념 정의
AWS DataSync는 AWS에서 제공하는 **완전 관리형 온라인 데이터 전송 서비스**다. 온프레미스 스토리지, 다른 클라우드, AWS 스토리지 서비스 간에 대용량 데이터를 빠르고 안전하게 자동으로 이동할 수 있다. 데이터 마이그레이션, 아카이빙, 복제, 재해복구 등 다양한 시나리오에서 기존 방식보다 최대 10배 빠른 속도로 데이터를 전송한다.

쉽게 말해 "온프레미스와 AWS, 또는 AWS 서비스 간 대용량 파일·객체 데이터를 초고속·자동·안전하게 동기화·이동하는 클라우드 데이터 전송 허브"다.

## 핵심 특징

**초고속 데이터 전송**
- AWS 독자 개발 전송 프로토콜로 기존 방식 대비 최대 10배 빠른 속도
- 단일 DataSync 에이전트가 10Gbps 네트워크 링크 완전 활용
- 증분 전송, 인라인 압축, 희소 파일 감지 등 네트워크 최적화 기술 적용

**완전 자동화 및 간소화**
- 스크립트 작성·수동 관리 불필요, GUI 또는 CLI로 간단히 작업 설정
- 재시도·네트워크 복원력 메커니즘 내장
- 스케줄링으로 주기적 자동 실행(시간별, 일별, 주별)

**데이터 무결성 및 보안**
- 전송 중·전송 후 자동 무결성 검증(소스와 대상 데이터 일치 확인)
- 전송 중 TLS 암호화, 저장 시 S3/EFS/FSx 암호화 지원
- VPC 엔드포인트(AWS PrivateLink)로 인터넷 우회 없는 프라이빗 전송

**다양한 프로토콜·환경 지원**
- 온프레미스: NFS, SMB, HDFS, 자체 관리 객체 스토리지(S3 API)
- 클라우드: Azure Blob Storage(Azure Data Lake Gen2 포함), Azure Files
- AWS: S3, EFS, FSx for Windows/Lustre/NetApp ONTAP/OpenZFS

**대역폭 제어 및 필터링**
- 최대 10Gbps까지 전송 속도 조절(비즈니스 영향 최소화)
- 파일·폴더·객체 필터링(포함/제외 필터)으로 필요한 데이터만 전송
- 메타데이터, 타임스탬프, 권한 정보 보존

## 주요 구성 요소

**DataSync Agent**
- 온프레미스 또는 엣지 환경에 배포되는 가상 머신 어플라이언스
- VMware ESXi, Linux KVM, Microsoft Hyper-V 지원
- 소스 스토리지를 읽고 AWS DataSync 서비스로 데이터 전송
- NFS, SMB, HDFS 프로토콜 지원

**Data Transfer Task**
- 소스·대상·전송 설정을 정의하는 실행 단위
- 전체 동기화 또는 증분 동기화(변경된 파일만) 선택
- 필터, 대역폭 제한, 검증 옵션 등 세밀한 설정

**Location(위치)**
- 소스와 대상 스토리지 엔드포인트 정의
- 온프레미스 NFS/SMB 공유, S3 버킷, EFS 파일시스템, FSx 등
- 각 Location은 재사용 가능

**AWS DataSync Service**
- 클라우드 측 완전 관리형 서비스
- 데이터 전송 실행, 모니터링, 자동 확장
- CloudWatch 통합 모니터링·로깅

## 기존 데이터 전송 방식 vs DataSync 비교

| 특징 | AWS DataSync | 기존 방식(rsync, 스크립트) |
|------|--------------|---------------------------|
| 속도 | 최대 10배 빠름 | 느리고 비효율적 |
| 자동화 | 완전 자동화 | 수동 스크립트·관리 |
| 보안 | TLS 암호화·검증 내장 | 별도 구성 필요 |
| 확장성 | 자동 확장 | 수동 리소스 관리 |
| 모니터링 | CloudWatch 통합 | 별도 도구 필요 |
| 대역폭 제어 | 세밀한 조절 | 제한적 |

## 주요 기능

**증분 전송**
- 초기 전체 전송 후, 변경된 파일만 자동 감지·전송
- 전송 시간·비용·네트워크 사용량 대폭 절감

**스케줄링**
- 시간별, 일별, 주별 자동 실행 스케줄 설정
- 비즈니스 시간 외 전송으로 네트워크 영향 최소화

**메타데이터 보존**
- 파일 권한, 타임스탬프, 소유자, 그룹 정보 보존
- POSIX 권한, Windows ACL 지원

**필터링**
- 특정 파일·폴더·객체 포함/제외 패턴 지정
- 불필요한 데이터 전송 방지

**네트워크 최적화**
- 멀티스레드 연결로 WAN 성능 극대화
- 인라인 압축으로 전송 데이터량 감소
- 희소 파일 감지로 효율적 전송

**무결성 검증**
- 전송 중 체크섬 계산·검증
- 소스와 대상 데이터 일치 보장

**VPC 엔드포인트 지원**
- AWS PrivateLink로 인터넷 우회 없는 프라이빗 전송
- 보안 강화 및 데이터 전송비 절감

## 주요 활용 사례

**데이터 마이그레이션**
- 온프레미스 파일 서버·NAS를 AWS(S3, EFS, FSx)로 마이그레이션
- 레거시 스토리지 시스템 폐기 및 클라우드 전환
- 다른 클라우드(Azure, GCP)에서 AWS로 데이터 이전

**아카이빙**
- 콜드 데이터를 S3 Glacier Flexible Retrieval/Deep Archive로 자동 아카이브
- 온프레미스 스토리지 용량 확보 및 비용 절감

**데이터 보호 및 복제**
- 온프레미스 데이터를 AWS에 자동 백업·복제
- 재해복구(DR) 시나리오 구현
- 정기적 스냅샷 전송으로 데이터 손실 방지

**하이브리드 클라우드 워크플로**
- 온프레미스와 클라우드 간 지속적 데이터 동기화
- 클라우드 기반 분석·ML을 위한 데이터 수집

**콘텐츠 배포**
- 미디어·로그·IoT 데이터 등 대용량 파일 배포
- 글로벌 리전 간 데이터 복제

## 기본 워크플로

### 1. DataSync Agent 배포(온프레미스 전송 시)
```bash
# VMware/KVM/Hyper-V에 Agent VM 배포
# AWS 콘솔에서 Agent 활성화
# 온프레미스 네트워크에서 AWS DataSync 서비스로 연결 확인
```

### 2. Location(위치) 정의
```bash
# 소스: 온프레미스 NFS 공유, SMB 공유, Azure Blob 등
# 대상: S3 버킷, EFS 파일시스템, FSx 등
```

### 3. Task(작업) 생성 및 설정
```bash
# 소스·대상 Location 선택
# 전송 옵션(증분, 필터, 대역폭, 검증) 설정
# 스케줄 구성(즉시 실행 또는 주기적 실행)
```

### 4. Task 실행 및 모니터링
```bash
# Task 실행(수동 또는 자동 스케줄)
# CloudWatch에서 전송 진행률, 성공/실패 확인
# 전송 완료 후 무결성 검증 결과 확인
```

## 비용 구조

**데이터 복사 비용**
- 복사된 데이터 GB당 $0.0125
- 증분 전송 시 변경된 데이터만 과금

**데이터 검색 비용(리스팅)**
- S3 List 작업 등 소스·대상 스캔 시 추가 비용

**데이터 전송 비용**
- AWS 리전 간 전송 시 표준 데이터 전송 요금
- 온프레미스-AWS 간 인바운드 전송 무료, 아웃바운드 유료

**Agent 비용**
- Agent 자체는 무료(컴퓨팅 리소스는 사용자 부담)

## 보안 모범 사례

**네트워크 보안**
- VPC 엔드포인트로 인터넷 우회 없는 프라이빗 전송
- Direct Connect/VPN으로 온프레미스-AWS 간 전용선 연결
- 방화벽·보안그룹으로 필요한 포트만 허용

**데이터 암호화**
- 전송 중 TLS 1.2 암호화 필수
- S3/EFS/FSx 저장 시 암호화 활성화(KMS 키 사용)
- 민감한 데이터는 암호화 후 전송

**접근 제어**
- IAM 역할로 DataSync에 최소 권한 부여
- 소스·대상 스토리지 접근 권한 세밀하게 제어
- CloudTrail로 모든 API 호출 감사

**모니터링 및 알림**
- CloudWatch 메트릭·로그 실시간 모니터링
- 전송 실패·지연 시 자동 알림 설정
- 정기적 전송 결과 검토 및 최적화

AWS DataSync는 클라우드 마이그레이션, 하이브리드 환경, 데이터 보호에서 데이터 이동의 속도·안전성·자동화를 혁신적으로 개선하는 필수 데이터 전송 서비스다.
