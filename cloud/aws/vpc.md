# AWS VPC란?

## 개념 정의
**Amazon Virtual Private Cloud(VPC)** 는 AWS 클라우드 내에서 논리적으로 격리된 가상 네트워크를 정의하고 AWS 리소스를 시작할 수 있게 하는 서비스다. 사용자가 완전히 제어할 수 있는 개인 전용 네트워크 공간을 제공한다.

VPC는 퍼블릭 클라우드 환경에서 **프라이빗하고 안전한 공간**을 생성하는 싱글 테넌트 개념으로, 다른 모든 퍼블릭 클라우드 테넌트와 논리적으로 격리되어 있다.

## 핵심 특징
- **논리적 격리**: 다른 사용자의 리소스와 완전히 분리된 환경을 구성한다
- **완전한 제어**: IP 주소 범위 선택, 서브넷 생성, 라우팅 테이블 및 네트워크 게이트웨이 구성 등 가상 네트워킹 환경을 완전히 제어할 수 있다
- **리전 종속성**: VPC는 각 리전에 하나씩 생성되며 다른 리전과 걸쳐서 확장이 불가능하다
- **사설 IP 대역**: RFC1918 사설 IP 대역에 맞추어 설계해야 한다

## IP 주소 범위
VPC에서 사용하는 **사설 IP 대역**은 다음과 같다
- **10.0.0.0 - 10.255.255.255** (10/8 prefix)
- **172.16.0.0 - 172.31.255.255** (172.16/12 prefix)
- **192.168.0.0 - 192.168.255.255** (192.168/16 prefix)

## VPC의 장점
### 보안 강화
- 연결을 보호 및 모니터링하고 트래픽을 차단한다
- 가상 네트워크 내부의 인스턴스 액세스를 제한한다
- 인바운드 및 아웃바운드 연결에 규칙을 적용하여 보안 태세를 개선한다

### 시간 절약
가상 네트워크를 설정, 관리 및 검증하는 데 소요되는 시간을 줄인다.

### 환경 관리 및 제어
자체 IP 주소 범위를 선택하고, 서브넷을 생성한 후 라우팅 테이블을 구성하여 가상 네트워크를 사용자 지정할 수 있다.

## 주요 구성 요소
### 서브넷 (Subnet)
- VPC 내에서 IP 주소 범위를 나누는 단위다
- 각 가용 영역(AZ)에 하나씩 생성할 수 있다
- **퍼블릭 서브넷**과 **프라이빗 서브넷**으로 구분된다

### 인터넷 게이트웨이 (Internet Gateway)
VPC의 리소스와 인터넷 간의 통신을 허용하는 게이트웨이다.

### 라우팅 테이블 (Route Table)
네트워크 트래픽이 향하는 위치를 결정하는 라우팅 규칙의 집합이다.

### 보안 그룹 (Security Group)
인스턴스에 대한 가상 방화벽 역할을 하며 인바운드 및 아웃바운드 트래픽을 제어한다.

## 아키텍처 예시
**3티어 아키텍처**의 경우:
- **웹 티어**: 퍼블릭 서브넷에 배치되어 인터넷과 직접 통신
- **애플리케이션 티어**: 프라이빗 서브넷에 배치되어 웹 티어와만 통신
- **데이터베이스 티어**: 프라이빗 서브넷에 배치되어 애플리케이션 티어와만 통신

## 주요 사용 사례
### 단순한 웹사이트 또는 블로그 시작
인바운드 및 아웃바운드 연결에 규칙을 적용하여 웹 애플리케이션 보안 태세를 개선한다.

### 멀티 티어 웹 애플리케이션 호스팅
웹 서버, 애플리케이션 서버 및 데이터베이스 간의 네트워크 연결 및 제한 사항을 정의한다.

### 하이브리드 연결 생성
AWS 서비스와 온프레미스에서 호환되는 VPC 네트워크를 구축하고 관리한다.

## EC2-Classic과의 차이점
**VPC 도입 이전**인 2011년까지는 **EC2-Classic** 방식을 사용했다:
- 모든 인스턴스가 단일 네트워크를 구축했다
- 인스턴스들이 거미줄처럼 연결되어 복잡도가 높았다
- 새로운 EC2가 생성되면 기존의 모든 EC2를 수정해야 하는 번거로움이 있었다

**VPC 도입 이후**:
- 계정별로 작은 네트워크를 구성할 수 있게 되었다
- VPC별로 네트워크 설정을 다르게 줄 수 있다
- 보안을 강화하고 내부 IP 사용으로 공인 IP 낭비를 줄일 수 있다
- VPC들끼리는 서로 독립적이므로 서로 영향을 끼치지 않는다

## IPv4/IPv6 지원
VPC에서 **IPv4**와 **IPv6**를 모두 사용하여 리소스와 애플리케이션에 안전하고 쉽게 액세스할 수 있다.

## VPC의 필수성
AWS는 VPC의 중요성을 강조하여 **모든 서비스에 VPC를 적용하도록 강제**하고 있다. 현재 EC2-Classic은 사용이 중단되고 VPC 사용이 의무화되었으며, 대부분의 AWS 서비스가 VPC에 의존적이기 때문에 VPC에 대한 이해는 필수적이다.
