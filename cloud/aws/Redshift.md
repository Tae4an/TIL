# AWS Redshift란?

## 개념 정의
**AWS Redshift**는 AWS에서 제공하는 **완전 관리형 데이터 웨어하우스 서비스**다. 페타바이트 규모의 데이터를 빠르고 비용 효율적으로 분석할 수 있으며, 표준 SQL과 기존 BI 도구를 사용해 복잡한 분석 쿼리를 실행할 수 있다.

간단히 말해 **"클라우드 기반의 초고속 데이터 분석 창고"** 로, 기업의 모든 데이터를 한 곳에 모아 인사이트를 도출하는 중앙 집중식 분석 플랫폼 역할을 한다.

## 핵심 특징

### **완전 관리형 서비스**
- **인프라 관리 불필요**: AWS가 하드웨어 프로비저닝, 설정, 구성, 모니터링, 백업, 보안 패치를 모두 관리
- **자동 백업**: 지속적인 증분 백업으로 데이터 손실 방지
- **자동 스케일링**: 워크로드에 따른 자동 확장 및 축소

### **초고속 성능**
- **MPP 아키텍처**: 대규모 병렬 처리로 복잡한 쿼리를 수초 내에 실행
- **컬럼형 스토리지**: 압축률이 높고 분석 쿼리에 최적화된 저장 방식
- **고급 압축**: 데이터 크기를 1/3 수준까지 압축해 I/O 성능 향상

### **비용 효율성**
- **온디맨드 가격**: 초기 투자 비용 없이 사용한 만큼만 지불
- **예약 인스턴스**: 1년~3년 약정으로 최대 75% 비용 절감
- **스팟 인스턴스**: 일시적인 워크로드에 대해 최대 90% 할인

### **AWS 서비스와의 완벽한 통합**
- **S3**: 데이터 레이크와의 직접 연결로 페타바이트급 데이터 분석
- **Glue**: ETL 파이프라인 자동화
- **QuickSight**: 비주얼 대시보드 및 보고서 생성

## 주요 구성 요소

### **클러스터 (Cluster)**
- **Redshift의 최상위 컨테이너**로 하나 이상의 노드로 구성
- 각 클러스터는 독립적인 컴퓨팅 환경 제공
- VPC 내에서 실행되어 네트워크 격리 보장

### **노드 (Nodes)**
- **리더 노드**: 클라이언트 연결을 받고 쿼리를 파싱하여 컴퓨트 노드에 분산
- **컴퓨트 노드**: 실제 데이터 저장 및 쿼리 실행을 담당
- 노드 타입: **ra3**, **dc2**, **ds2** 등 워크로드에 따라 선택

### **데이터베이스**
- PostgreSQL 8.0.2 기반으로 표준 SQL 지원
- 클러스터당 여러 데이터베이스 생성 가능
- 각 데이터베이스는 독립적인 스키마와 테이블 구조 보유

### **스키마 및 테이블**
- **Distribution Key**: 데이터를 노드 간에 분산하는 기준
- **Sort Key**: 쿼리 성능 최적화를 위한 정렬 키
- **Compression**: 컬럼별 최적 압축 알고리즘 자동 선택

## 전통적 데이터베이스 vs Redshift 비교

| 특징 | Redshift | 전통적 RDBMS |
|------|----------|--------------|
| **아키텍처** | MPP (병렬 처리) | SMP (단일 처리) |
| **스토리지** | 컬럼형 | 행 기반 |
| **확장성** | 페타바이트급 | 테라바이트급 |
| **분석 성능** | 초고속 | 상대적으로 느림 |
| **관리** | 완전 관리형 | 수동 관리 필요 |
| **비용** | 사용량 기반 | 라이선스 + 하드웨어 |

## 주요 기능

### **자동 백업 및 스냅샷**
- **연속 백업**: 8시간마다 자동으로 증분 백업 수행
- **수동 스냅샷**: 중요한 시점에 수동으로 스냅샷 생성
- **교차 리전 복사**: 다른 리전으로 스냅샷 복사하여 재해 복구 지원

### **성능 모니터링**
- **CloudWatch 통합**: CPU, 메모리, 디스크 I/O 등 실시간 모니터링
- **쿼리 성능 분석**: 느린 쿼리 식별 및 최적화 제안
- **WLM**: 워크로드 관리로 동시 쿼리 성능 최적화

### **보안 및 컴플라이언스**
- **VPC 지원**: 프라이빗 네트워크 내에서 안전한 실행
- **암호화**: 저장 시 및 전송 중 AES-256 암호화
- **감사 로깅**: 모든 데이터베이스 활동 로그 기록

### **Redshift Spectrum**
- **서버리스 쿼리**: S3에 저장된 엑사바이트급 데이터를 직접 쿼리
- **스키마 온 리드**: 데이터를 이동하지 않고도 즉시 분석
- **비용 최적화**: 자주 사용하지 않는 데이터는 S3에 보관

## 주요 활용 사례

### **비즈니스 인텔리전스 (BI)**
- 매출, 고객, 마케팅 데이터 통합 분석
- 실시간 대시보드 구축
- 경영진 보고서 자동 생성

### **데이터 마이닝 및 머신러닝**
- 고객 행동 패턴 분석
- 추천 시스템 구축
- 예측 분석 모델 개발

### **ETL 및 데이터 파이프라인**
- 여러 소스에서 데이터 수집 및 변환
- 배치 처리 및 실시간 스트리밍
- 데이터 품질 관리 및 정제

## 기본 워크플로

### **1. 클러스터 생성**
```sql
-- AWS 콘솔에서 클러스터 생성 후 연결
-- 노드 타입: ra3.xlplus (권장)
-- 노드 개수: 워크로드에 따라 결정
```

### **2. 테이블 생성 및 데이터 로딩**
```sql
-- 테이블 생성 (Distribution & Sort Key 설정)
CREATE TABLE sales_fact (
    sale_id BIGINT NOT NULL,
    product_id INTEGER DISTKEY,
    customer_id INTEGER,
    sale_date DATE SORTKEY,
    amount DECIMAL(10,2)
);

-- S3에서 대용량 데이터 로딩
COPY sales_fact FROM 's3://my-bucket/sales-data/'
IAM_ROLE 'arn:aws:iam::123456789012:role/RedshiftRole'
DELIMITER ',' IGNOREHEADER 1;
```

### **3. 분석 쿼리 실행**
```sql
-- 월별 매출 분석
SELECT 
    DATE_TRUNC('month', sale_date) as month,
    SUM(amount) as total_sales,
    COUNT(*) as transaction_count
FROM sales_fact
WHERE sale_date >= '2024-01-01'
GROUP BY 1
ORDER BY 1;
```

### **4. 성능 최적화**
```sql
-- 테이블 통계 정보 업데이트
ANALYZE sales_fact;

-- 압축 최적화
VACUUM REINDEX sales_fact;
```

## 비용 구조

### **컴퓨팅 비용**
- **ra3.xlplus**: 시간당 $3.26 (4 vCPU, 32GB RAM)
- **ra3.4xlarge**: 시간당 $13.04 (16 vCPU, 128GB RAM)
- **예약 인스턴스**: 1년 약정 시 34% 할인, 3년 약정 시 55% 할인

### **스토리지 비용**
- **관리형 스토리지**: GB당 월 $0.024
- **백업 스토리지**: 프로비저닝된 스토리지의 100% 범위 내에서 무료

### **데이터 전송 비용**
- **AWS 내부**: 동일 리전 내 전송 무료
- **인터넷 아웃바운드**: GB당 $0.09 (첫 1GB 무료)

## 보안 모범 사례

### **네트워크 보안**
- **VPC 내 배포**: 퍼블릭 인터넷에서 직접 접근 차단
- **보안 그룹**: 필요한 포트(5439)만 특정 IP에서 접근 허용
- **VPC 엔드포인트**: AWS 서비스 간 프라이빗 연결

### **접근 제어**
- **IAM 역할**: 데이터베이스 사용자별 최소 권한 부여
- **MFA 활성화**: 관리자 계정에 대한 다단계 인증 필수
- **감사 로깅**: 모든 사용자 활동 CloudTrail로 기록

### **데이터 암호화**
- **저장 시 암호화**: 클러스터 생성 시 KMS 키로 암호화 활성화
- **전송 중 암호화**: SSL/TLS를 통한 모든 데이터 전송
- **백업 암호화**: 스냅샷도 동일한 암호화 키로 보호

Redshift는 **엔터프라이즈급 데이터 분석의 핵심**으로, 빅데이터 시대에 기업이 데이터 기반 의사결정을 내릴 수 있게 하는 강력하고 확장 가능한 분석 플랫폼이다.
