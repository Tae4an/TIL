# AWS DynamoDB란?

## DynamoDB의 기본 정의

**AWS DynamoDB는 Amazon Web Services에서 제공하는 완전 관리형 NoSQL 데이터베이스 서비스다**. 키-값 및 문서 데이터베이스로, 어떤 규모에서든 빠르고 예측 가능한 성능을 제공하며 완벽한 확장성을 자랑한다.

**간단히 말해서, 전통적인 관계형 데이터베이스의 복잡함 없이 빠르고 유연한 데이터 저장소를 제공하는 서비스다**. 마치 거대한 전자사전처럼 키(단어)를 입력하면 즉시 값(의미)을 찾아주는 방식으로 작동한다.

## NoSQL과 관계형 데이터베이스의 차이

## 구조적 차이점

**DynamoDB는 NoSQL 데이터베이스로, 전통적인 관계형 데이터베이스와는 근본적으로 다른 접근 방식을 취한다**:

| 구분 | 관계형 DB (MySQL, PostgreSQL) | NoSQL (DynamoDB) |
| --- | --- | --- |
| **데이터 구조** | 고정된 스키마, 테이블-행-열 | 유연한 스키마, 키-값 쌍 |
| **관계** | 외래키로 테이블 간 관계 정의 | 중첩된 데이터 구조 허용 |
| **쿼리** | SQL 언어 사용 | API 호출 또는 PartiQL |
| **확장성** | 수직 확장 (더 강한 서버) | 수평 확장 (더 많은 서버) |
| **트랜잭션** | ACID 완벽 지원 | 제한적 트랜잭션 지원 |

## 일상생활 비유

**관계형 DB vs NoSQL을 도서관에 비유하면**:

- **관계형 DB**: 전통적인 도서관
    - 모든 책이 정해진 분류 체계에 따라 배치
    - 카드 목록으로 책 간의 관계 추적
    - 체계적이지만 새로운 분류 추가 시 전체 재정리 필요
- **DynamoDB**: 현대적인 디지털 도서관
    - 각 책이 고유한 ID를 가지고 자유로운 위치에 저장
    - 내용에 따라 유연하게 메타데이터 추가 가능
    - 빠른 검색이지만 복잡한 관계 분석은 제한적

## DynamoDB의 핵심 구성 요소

## 테이블과 항목

**DynamoDB의 데이터 구조는 다음과 같다**:

| 구성 요소 | 설명 | 예시 |
| --- | --- | --- |
| **테이블** | 데이터를 담는 최상위 컨테이너 | Users, Orders, Products |
| **항목** | 테이블 내의 개별 데이터 레코드 | 특정 사용자의 정보 |
| **속성** | 항목을 구성하는 개별 데이터 필드 | 이름, 나이, 이메일 |

## 기본 키 (Primary Key)

**DynamoDB에서 각 항목을 고유하게 식별하는 키**:

- **파티션 키**: 항목을 분산 저장할 때 사용하는 기본 키
- **정렬 키 (선택적)**: 파티션 키와 함께 사용하여 복합 기본 키 구성

**예시**:

```json
{
  "UserID": "user123",      *// 파티션 키*
  "Timestamp": "2024-01-15", *// 정렬 키*
  "Name": "김철수",
  "Email": "kim@example.com",
  "Age": 30
}
```

## DynamoDB의 주요 특징

## 1. 완전 관리형 서비스

**서버나 데이터베이스 관리가 전혀 필요 없다**:

- 자동 하드웨어 프로비저닝
- 소프트웨어 패치 및 업데이트 자동 적용
- 백업 및 복구 자동화
- 보안 및 네트워킹 자동 관리

## 2. 성능과 확장성

**예측 가능한 고성능 제공**:

- 한 자리 수 밀리초 지연 시간
- 초당 수백만 개 요청 처리 가능
- 자동 스케일링으로 트래픽 변동에 대응
- 글로벌 테이블로 다중 리전 복제

## 3. 유연한 데이터 모델

**스키마가 자유로워 다양한 데이터 타입 지원**:

- 문자열, 숫자, 바이너리
- 불린, null 값
- 리스트, 맵, 집합 등 복잡한 데이터 구조
- 중첩된 JSON 형태 데이터

## 실제 활용 사례

## 1. 소셜 미디어 애플리케이션

**인스타그램이나 페이스북 같은 서비스**:

- 사용자 프로필 정보 저장
- 게시물과 댓글 데이터 관리
- 좋아요, 팔로우 관계 추적
- 실시간 알림 시스템

**예시 데이터 구조**:

```json
{
  "PostID": "post123",
  "UserID": "user456",
  "Content": "오늘 날씨가 좋네요!",
  "Likes": 15,
  "Comments": [
    {"UserID": "user789", "Text": "정말 그렇네요!"}
  ],
  "Timestamp": "2024-01-15T10:30:00Z"
}
```

## 2. 전자상거래 장바구니

**온라인 쇼핑몰의 장바구니 시스템**:

- 사용자별 장바구니 상품 목록
- 세션 기반 임시 저장
- 빠른 업데이트와 조회
- 높은 동시성 처리

## 3. IoT 센서 데이터

**스마트 홈이나 산업용 센서**:

- 대량의 시계열 데이터 저장
- 실시간 데이터 수집
- 센서별 최신 상태 추적
- 이상 탐지 및 알림

## 4. 게임 리더보드

**모바일 게임의 순위 시스템**:

- 플레이어별 점수 관리
- 실시간 순위 업데이트
- 글로벌 및 지역별 랭킹
- 이벤트별 별도 리더보드

## DynamoDB의 두 가지 용량 모드

## 프로비저닝된 모드 vs 온디맨드 모드

**DynamoDB는 두 가지 용량 관리 방식을 제공한다**:

| 특징 | 프로비저닝된 모드 | 온디맨드 모드 |
| --- | --- | --- |
| **용량 계획** | 읽기/쓰기 용량 단위(RCU/WCU) 사전 설정 | 용량 계획 불필요 |
| **확장성** | Auto Scaling으로 조절 (1분 지연) | 즉시 자동 확장 |
| **비용 구조** | 설정한 용량에 대해 시간당 과금 | 실제 요청 수에 따라 과금 |
| **적합한 상황** | 예측 가능한 트래픽 패턴 | 예측 불가능하거나 급변하는 트래픽 |
| **비용 효율성** | 지속적 사용 시 경제적 | 간헐적 사용 시 경제적 |

## 비용 비교 예시

**월 1,000만 회 읽기, 100만 회 쓰기 기준**:

- **프로비저닝된 모드**: 약 $60/월
- **온디맨드 모드**: 약 $125/월

**하지만 트래픽이 불규칙하거나 초기 단계라면 온디맨드가 더 경제적일 수 있다.**

## DynamoDB의 고급 기능

## 1. 글로벌 보조 인덱스 (GSI)

**다양한 쿼리 패턴을 지원하기 위한 인덱스**:

- 기본 키와 다른 속성으로 쿼리 가능
- 완전히 별도의 테이블처럼 작동
- 서로 다른 파티션/정렬 키 사용 가능

## 2. DynamoDB Streams

**데이터 변경 사항을 실시간으로 캡처**:

- 항목 생성, 수정, 삭제 이벤트 추적
- Lambda 함수와 연동하여 자동 처리
- 실시간 분석이나 복제에 활용

## 3. 글로벌 테이블

**다중 리전에 걸친 데이터 복제**:

- 여러 AWS 리전에 동일한 테이블 복제
- 지연 시간 최소화
- 재해 복구 및 글로벌 서비스 지원

## 4. Point-in-Time Recovery

**연속적인 백업과 복구 기능**:

- 지난 35일 내 임의 시점으로 복구 가능
- 실수로 삭제된 데이터 복원
- 완전 자동화된 백업 시스템

## 비용 구조

## 기본 요금 체계

**DynamoDB의 주요 비용 요소**:

| 비용 항목 | 프로비저닝된 모드 | 온디맨드 모드 |
| --- | --- | --- |
| **읽기 용량** | RCU당 시간당 $0.00013 | 100만 읽기당 $0.25 |
| **쓰기 용량** | WCU당 시간당 $0.00065 | 100만 쓰기당 $1.25 |
| **저장 공간** | GB당 월 $0.25 | GB당 월 $0.25 |
| **백업** | GB당 월 $0.20 | GB당 월 $0.20 |

## 비용 최적화 전략

**효과적인 비용 관리 방법**:

- **적절한 모드 선택**: 사용 패턴에 맞는 용량 모드 선택
- **인덱스 최적화**: 불필요한 GSI 제거
- **데이터 압축**: JSON 키 이름 단축화
- **TTL 활용**: 자동 만료로 불필요한 데이터 정리
- **예약 용량**: 장기 사용 시 최대 76% 할인

## DynamoDB vs 다른 데이터베이스

## NoSQL 데이터베이스 비교

| 특징 | DynamoDB | MongoDB | Cassandra |
| --- | --- | --- | --- |
| **관리** | 완전 관리형 | 관리형/자체 호스팅 | 주로 자체 호스팅 |
| **확장성** | 자동 무제한 확장 | 수동 샤딩 필요 | 수동 설정 필요 |
| **쿼리** | 제한적 쿼리 | 풍부한 쿼리 언어 | CQL (SQL 유사) |
| **일관성** | 최종 일관성 (강한 일관성 옵션) | 강한 일관성 | 튜닝 가능한 일관성 |
| **비용** | 사용량 기반 | 인스턴스 기반 | 인프라 비용 |

## 관계형 데이터베이스와의 비교

| 사용 사례 | DynamoDB 선택 | RDS 선택 |
| --- | --- | --- |
| **웹 애플리케이션** | 높은 트래픽, 단순한 쿼리 | 복잡한 관계, SQL 필요 |
| **모바일 앱** | 실시간 동기화, 오프라인 지원 | 복잡한 비즈니스 로직 |
| **IoT/센서 데이터** | 대용량 시계열 데이터 | 데이터 분석 및 보고서 |
| **게임** | 플레이어 상태, 리더보드 | 게임 통계 분석 |

## DynamoDB 설계 모범 사례

## 1. 파티션 키 설계

**고르게 분산되는 파티션 키 선택**:

- **좋은 예**: UserID, 주문번호, 제품ID
- **나쁜 예**: 날짜만 사용 (핫 파티션 발생)
- **해결책**: 날짜 + 랜덤 접미사 조합

## 2. 단일 테이블 설계

**여러 엔티티를 하나의 테이블에 저장**:

```json
*// 사용자 정보*
{
  "PK": "USER#user123",
  "SK": "PROFILE",
  "Name": "김철수",
  "Email": "kim@example.com"
}

*// 사용자의 주문*
{
  "PK": "USER#user123",
  "SK": "ORDER#order456",
  "Amount": 50000,
  "Status": "배송중"
}
```

## 3. 쿼리 최적화

**효율적인 데이터 접근 패턴 설계**:

- 자주 함께 조회되는 데이터는 같은 파티션에 저장
- GSI를 활용한 다양한 쿼리 패턴 지원
- Scan 작업 최소화 (비용과 성능 최적화)

## DynamoDB 개발 및 운영

## 개발 도구

**DynamoDB 작업을 위한 다양한 도구**:

- **AWS SDK**: 각 언어별 공식 라이브러리
- **AWS CLI**: 명령줄에서 테이블 관리
- **NoSQL Workbench**: 시각적 데이터 모델링 도구
- **DynamoDB Local**: 로컬 개발 환경

## 모니터링 및 알림

**CloudWatch를 통한 운영 관리**:

- 읽기/쓰기 용량 사용률 모니터링
- 제한 오류(throttling) 발생 알림
- 응답 시간 성능 추적
- 비용 사용량 알람 설정

## 보안 기능

**강력한 보안 및 규정 준수**:

- **암호화**: 저장 및 전송 중 암호화
- **VPC 엔드포인트**: 프라이빗 네트워크 접근
- **IAM 통합**: 세밀한 권한 제어
- **감사 로깅**: CloudTrail을 통한 API 호출 추적

## DynamoDB의 제한사항

## 기술적 제한

**알아두어야 할 제한사항**:

- **항목 크기**: 최대 400KB
- **쿼리 결과**: 1MB 제한 (페이지네이션 필요)
- **트랜잭션**: 최대 25개 항목
- **배치 작업**: 한 번에 최대 25개 항목

## 적합하지 않은 용도

**DynamoDB가 적절하지 않은 경우**:

- 복잡한 JOIN 연산이 필요한 경우
- Ad-hoc 분석 쿼리가 빈번한 경우
- 강한 일관성이 절대적으로 필요한 금융 거래
- 기존 SQL 기반 애플리케이션 마이그레이션

## 대안 고려

**제한사항 극복 방법**:

- 복잡한 쿼리: Amazon Athena, Redshift 활용
- 실시간 분석: Kinesis Analytics 연동
- ACID 트랜잭션: Aurora Serverless 고려
- SQL 호환: RDS 또는 Aurora 사용

## DynamoDB의 미래와 발전

## 최신 기능 업데이트

**지속적으로 추가되는 새로운 기능들**:

- **PartiQL**: SQL 호환 쿼리 언어 지원
- **DynamoDB Accelerator (DAX)**: 마이크로초 지연시간 캐시
- **Export to S3**: 운영 중단 없이 전체 테이블 내보내기
- **Import from S3**: S3 데이터를 직접 DynamoDB로 가져오기

## 서버리스 생태계 통합

**AWS 서버리스 아키텍처의 핵심**:

- Lambda와의 완벽한 통합
- API Gateway를 통한 REST API 구축
- Step Functions로 복잡한 워크플로 구현
- EventBridge를 통한 이벤트 기반 아키텍처

DynamoDB는 **현대 클라우드 네이티브 애플리케이션의 핵심 인프라**로 자리잡았다. NoSQL의 유연성과 완전 관리형 서비스의 편리함을 결합하여, 빠르게 변화하는 비즈니스 요구사항에 신속하게 대응할 수 있는 강력한 데이터베이스 솔루션이다. 적절한 설계 패턴과 모범 사례를 따른다면 확장성과 성능, 비용 효율성을 모두 만족하는 현대적인 애플리케이션을 구축할 수 있다.
