# IGW(Internet Gateway)란?

## 개념 정의
**IGW(Internet Gateway)** 는 AWS VPC와 인터넷 간의 통신을 가능하게 하는 **수평 확장형 고가용성 VPC 구성 요소**다. VPC 내부 리소스가 외부 인터넷에 접근하거나 인터넷에서 VPC 내부로 접근할 수 있게 해주는 **관문(Gateway) 역할**을 한다.

쉽게 말해 VPC의 **"인터넷 출입구"** 역할을 하는 서비스다.

## 핵심 기능

### **양방향 인터넷 통신**
- VPC 내부에서 외부 인터넷으로 나가는 **아웃바운드 트래픽** 허용
- 외부 인터넷에서 VPC 내부로 들어오는 **인바운드 트래픽** 허용
- **IPv4와 IPv6** 트래픽 모두 지원

### **NAT(Network Address Translation)**
- 퍼블릭 IP를 가진 인스턴스에 대해 **자동으로 NAT를 수행**한다
- 외부에서 요청이 들어올 때: 퍼블릭 IP → 프라이빗 IP로 변환
- 내부에서 외부로 나갈 때: 프라이빗 IP → 퍼블릭 IP로 변환

## 주요 특징

### **완전 관리형 서비스**
- AWS가 모든 관리 작업을 자동화 처리
- **대역폭 제약 없음** - 무제한 네트워크 처리량 제공
- **가용성 위험 없음** - 단일 장애 지점(SPOF) 없는 설계
- 별도 관리나 구성 작업 불필요

### **고유한 특성**
- 기존 라우터와 달리 **IP 주소나 네트워크 인터페이스가 없음**
- **AWS 리소스 ID**로만 식별 (`igw-`로 시작하는 고유 ID)
- VPC당 **하나의 IGW**만 연결 가능

## IGW 연결 조건

인터넷 통신을 위해서는 다음 3가지 조건을 모두 만족해야 한다:

### **1. IGW를 VPC에 연결**
- VPC 생성 후 별도로 IGW를 생성하고 연결해야 함
- 기본 VPC는 자동으로 IGW가 연결됨

### **2. 라우팅 테이블 설정**
- 서브넷의 라우팅 테이블에 **기본 경로(0.0.0.0/0)**를 IGW로 설정
- 이렇게 설정된 서브넷을 **퍼블릭 서브넷**이라 함

### **3. 퍼블릭 IP 할당**
- EC2 인스턴스에 **퍼블릭 IP 또는 Elastic IP** 할당
- 퍼블릭 IP 없이는 IGW가 있어도 인터넷 통신 불가

## 퍼블릭 vs 프라이빗 서브넷

### **퍼블릭 서브넷**
- 라우팅 테이블에 **IGW로 향하는 경로**가 있는 서브넷
- 인터넷과 직접 통신 가능
- 웹 서버, 로드 밸런서 등 외부 접근이 필요한 리소스 배치

### **프라이빗 서브넷**
- 라우팅 테이블에 **IGW로 향하는 경로가 없는** 서브넷
- 직접적인 인터넷 접근 불가
- 데이터베이스, 백엔드 서버 등 보안이 중요한 리소스 배치

## IGW 설정 순서

### **1. IGW 생성**
```
VPC → 인터넷 게이트웨이 → 인터넷 게이트웨이 생성
```

### **2. VPC에 연결**
```
생성된 IGW → 작업 → VPC에 연결
```

### **3. 라우팅 테이블 설정**
```
라우팅 테이블 → 라우팅 편집 → 대상: 0.0.0.0/0, 타겟: IGW ID
```

### **4. 퍼블릭 IP 할당**
```
EC2 인스턴스 → 퍼블릭 IP 자동 할당 활성화 또는 Elastic IP 연결
```

## 보안 고려사항

### **보안 그룹과 NACL**
- IGW 자체에는 보안 기능이 없음
- **보안 그룹**(인스턴스 레벨)과 **NACL**(서브넷 레벨)로 트래픽 제어
- 필요한 포트와 프로토콜만 허용하는 최소 권한 원칙 적용

### **프라이빗 리소스 보호**
- 중요한 리소스는 프라이빗 서브넷에 배치
- **NAT Gateway**를 통한 아웃바운드 전용 인터넷 접근
- **Bastion Host**를 통한 안전한 관리 접근

## IGW vs 기타 게이트웨이

### **vs NAT Gateway**
- **IGW**: 양방향 통신, 퍼블릭 IP 필요
- **NAT Gateway**: 아웃바운드만, 프라이빗 인스턴스용

### **vs VPN Gateway**
- **IGW**: 인터넷 통신용
- **VPN Gateway**: 온프레미스와 VPC 간 암호화된 연결

### **vs Egress-Only IGW**
- **IGW**: IPv4/IPv6 양방향 통신
- **Egress-Only IGW**: IPv6 아웃바운드 전용

## 주요 활용 사례

### **웹 서비스 호스팅**
- 퍼블릭 서브넷에 웹 서버 배치
- 사용자가 인터넷을 통해 웹사이트 접근

### **API 서버 운영**
- 외부 클라이언트의 API 요청 수신
- 외부 서비스와의 API 통신

### **소프트웨어 업데이트**
- EC2 인스턴스의 패키지 업데이트
- 외부 저장소에서 소프트웨어 다운로드

IGW는 **VPC와 인터넷을 연결하는 핵심 구성 요소**로, 클라우드 리소스가 외부 세계와 통신할 수 있게 해주는 필수적인 서비스다.
