# AWS Systems Manager란?

## 개념 정의
**AWS Systems Manager(SSM)** 는 AWS에서 제공하는 **완전 관리형 통합 운영 관리 서비스**다. AWS, 온프레미스, 멀티클라우드 환경에서 대규모로 노드를 중앙에서 보고 관리하고 운영할 수 있도록 지원하며, 단일 콘솔에서 여러 시스템 관리 작업을 자동화할 수 있다.

간단히 말해 **"클라우드 기반의 통합 시스템 관리 센터"** 로, 수십 개에서 수천 개의 서버를 마치 하나의 시스템처럼 효율적으로 관리할 수 있게 하는 중앙 집중식 운영 플랫폼 역할을 한다.

## 핵심 특징

### **완전 관리형 통합 서비스**
- **에이전트 기반**: SSM Agent를 통한 안전하고 확실한 시스템 제어
- **통합 콘솔**: 여러 AWS 계정 및 리전의 리소스를 단일 인터페이스에서 관리
- **멀티클라우드 지원**: AWS뿐만 아니라 온프레미스 및 타 클라우드 환경도 통합 관리

### **대규모 자동화 및 효율성**
- **대량 작업**: 수천 개의 인스턴스에서 동시에 명령 실행 및 작업 수행
- **스케줄링**: 정해진 시간에 자동으로 패치, 백업, 유지보수 작업 실행
- **워크플로 자동화**: 복잡한 운영 작업을 단계별로 자동화하여 인적 오류 최소화

### **강력한 보안 및 규정 준수**
- **에이전트 없는 접근**: SSH나 RDP 없이도 안전한 원격 접근 제공
- **IAM 통합**: AWS IAM을 통한 세밀한 권한 관리 및 접근 제어
- **감사 추적**: 모든 운영 활동에 대한 완전한 로깅 및 추적

### **운영 데이터 수집 및 분석**
- **인벤토리 관리**: 설치된 소프트웨어, 구성 정보, 패치 상태 자동 수집
- **컴플라이언스 모니터링**: 보안 정책 준수 여부 실시간 확인
- **성능 인사이트**: 시스템 성능 및 상태에 대한 상세한 분석 제공

## 주요 구성 요소

### **SSM Agent**
- **핵심 컴포넌트**: 관리 대상 노드에 설치되는 경량 소프트웨어
- **통신 역할**: Systems Manager 서비스와 관리 노드 간의 안전한 통신 담당
- **사전 설치**: Amazon Linux 2, Windows Server AMI 등에 기본 설치

### **관리형 노드 (Managed Nodes)**
- **EC2 인스턴스**: AWS 클라우드의 가상 서버 인스턴스
- **온프레미스 서버**: 기업 데이터센터의 물리적/가상 서버
- **하이브리드 환경**: 엣지 디바이스 및 IoT 장치까지 확장 관리

### **SSM Documents**
- **자동화 스크립트**: JSON 또는 YAML 형식의 작업 정의 문서
- **사전 정의 문서**: AWS에서 제공하는 일반적인 작업 템플릿
- **사용자 정의 문서**: 조직별 요구사항에 맞는 커스텀 스크립트

### **IAM 역할 및 인스턴스 프로필**
- **권한 관리**: Systems Manager 작업에 필요한 권한 정의
- **인스턴스 프로필**: IAM 역할을 EC2 인스턴스에 연결하는 컨테이너
- **최소 권한**: 필요한 작업에만 제한된 권한 부여

## 전통적 시스템 관리 vs Systems Manager 비교

| 특징 | Systems Manager | 전통적 시스템 관리 |
|------|-----------------|-------------------|
| **접근 방식** | 에이전트 기반 통합 관리 | SSH/RDP 개별 접근 |
| **확장성** | 수천 대 동시 관리 | 수동 일대일 관리 |
| **자동화** | 완전 자동화 워크플로 | 스크립트 기반 반자동 |
| **보안** | IAM 통합 + 감사 로깅 | 개별 계정 관리 |
| **규정 준수** | 실시간 컴플라이언스 체크 | 수동 점검 |
| **비용** | 사용량 기반 과금 | 도구 라이선스 + 인력 |

## 주요 기능

### **Session Manager**
- **브라우저 기반 셸**: 웹 콘솔에서 직접 터미널 세션 실행
- **포트 포워딩**: 로컬과 원격 간 안전한 터널링
- **세션 로깅**: 모든 사용자 활동 CloudTrail로 기록

### **Run Command**
- **원격 명령 실행**: 여러 인스턴스에서 동시에 명령어 실행
- **대량 작업**: 패키지 설치, 서비스 재시작 등 대규모 운영 작업
- **결과 추적**: 각 노드별 실행 결과 및 오류 상태 실시간 확인

### **Patch Manager**
- **자동 패치**: 운영 체제 및 소프트웨어 보안 패치 자동 적용
- **패치 그룹**: 환경별, 애플리케이션별 패치 정책 관리
- **유지보수 윈도우**: 지정된 시간에만 패치 작업 수행

### **Parameter Store**
- **구성 데이터 저장**: 애플리케이션 설정 정보 중앙 집중 관리
- **암호화 지원**: KMS를 통한 민감한 데이터 안전한 저장
- **버전 관리**: 매개변수 변경 이력 추적 및 롤백 지원

### **Automation**
- **워크플로 자동화**: 복잡한 다단계 작업을 자동화된 런북으로 실행
- **AWS API 통합**: CloudFormation, EC2, RDS 등 다양한 서비스 연동
- **예약 실행**: 특정 시간 또는 이벤트 기반 자동 실행

### **Inventory**
- **시스템 인벤토리**: 하드웨어, 소프트웨어, 네트워크 구성 정보 자동 수집
- **라이선스 추적**: 설치된 소프트웨어 라이선스 현황 관리
- **규정 준수**: 보안 정책 및 기업 표준 준수 여부 모니터링

## 주요 활용 사례

### **대규모 서버 운영 관리**
- 수백 개의 EC2 인스턴스에 동시에 보안 패치 적용
- 전체 서버 그룹의 소프트웨어 일괄 업데이트
- 시스템 구성 표준화 및 드리프트 방지

### **DevOps 및 CI/CD 통합**
- 배포 자동화 및 롤백 프로세스 구축
- 환경별 구성 관리 및 매개변수 주입
- 애플리케이션 상태 모니터링 및 자동 복구

### **보안 및 컴플라이언스**
- 보안 벤치마크 자동 적용 및 검증
- 취약점 스캔 및 자동 패치 적용
- 규정 준수 보고서 자동 생성

### **하이브리드 클라우드 관리**
- 온프레미스와 클라우드 환경 통합 관리
- 클라우드 마이그레이션 과정에서 일관된 운영
- 멀티클라우드 환경의 중앙 집중식 제어

## 기본 워크플로

### **1. SSM Agent 설정 및 IAM 역할 생성**
```bash
# IAM 역할 생성 (AmazonSSMManagedInstanceCore 정책 연결)
aws iam create-role --role-name SSMRole \
  --assume-role-policy-document file://trust-policy.json

# 인스턴스 프로필 생성 및 역할 연결
aws iam create-instance-profile --instance-profile-name SSMInstanceProfile
aws iam add-role-to-instance-profile --role-name SSMRole \
  --instance-profile-name SSMInstanceProfile
```

### **2. Run Command로 원격 명령 실행**
```bash
# 여러 인스턴스에서 동시에 명령 실행
aws ssm send-command \
  --instance-ids "i-1234567890abcdef0" "i-0987654321fedcba0" \
  --document-name "AWS-RunShellScript" \
  --parameters 'commands=["sudo yum update -y","sudo service httpd restart"]'
```

### **3. Parameter Store에서 구성 관리**
```bash
# 매개변수 저장
aws ssm put-parameter \
  --name "/myapp/database/url" \
  --value "postgresql://prod-db.example.com:5432/myapp" \
  --type "String"

# 암호화된 매개변수 저장
aws ssm put-parameter \
  --name "/myapp/database/password" \
  --value "supersecretpassword" \
  --type "SecureString"
```

### **4. 자동화 문서 실행**
```bash
# 패치 관리 자동화 실행
aws ssm start-automation-execution \
  --document-name "AWS-PatchInstanceWithRollback" \
  --parameters "InstanceId=i-1234567890abcdef0"
```

## 비용 구조

### **기본 요금**
- **Systems Manager 사용**: 대부분의 기능이 **무료** 제공
- **관리형 노드**: 온프레미스 서버는 노드당 월 $5.00
- **EC2 인스턴스**: AWS 내 EC2 인스턴스 관리는 무료

### **고급 기능 요금**
- **Patch Manager 고급**: 인스턴스당 월 $0.09
- **Automation**: 1,000개 단계당 $0.10
- **Parameter Store 고급**: 10,000개 요청당 $0.05

### **데이터 전송 비용**
- **AWS 내부**: 동일 리전 내 데이터 전송 무료
- **인터넷**: 아웃바운드 데이터 전송 시 표준 요금 적용

## 보안 모범 사례

### **IAM 권한 관리**
- **최소 권한 원칙**: 필요한 시스템 관리 작업에만 제한된 권한 부여
- **역할 기반 접근**: 개인 사용자 대신 IAM 역할 사용으로 보안 강화
- **정기 권한 검토**: 불필요한 권한 제거 및 권한 상승 방지

### **네트워크 보안**
- **VPC 엔드포인트**: 인터넷을 거치지 않는 프라이빗 통신 설정
- **보안 그룹**: Systems Manager 통신에 필요한 포트만 개방
- **프라이빗 서브넷**: 관리 대상 인스턴스를 프라이빗 환경에 배치

### **모니터링 및 감사**
- **CloudTrail 활성화**: 모든 Systems Manager API 호출 로깅
- **Session Manager 로깅**: 모든 세션 활동을 CloudWatch Logs로 기록
- **이상 활동 탐지**: 비정상적인 명령 실행 패턴 모니터링

### **데이터 보호**
- **Parameter Store 암호화**: 민감한 구성 데이터 KMS 암호화 저장
- **세션 암호화**: 모든 세션 트래픽 TLS 암호화
- **정기 키 순환**: 암호화 키 및 저장된 자격 증명 정기 갱신

Systems Manager는 **현대적인 클라우드 운영의 핵심**으로, 대규모 인프라를 안전하고 효율적으로 관리하며 운영 복잡성을 크게 줄여주는 필수적인 통합 관리 서비스다.
