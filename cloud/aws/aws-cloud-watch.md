# AWS CloudWatch란?

## CloudWatch의 기본 정의

**AWS CloudWatch는 Amazon Web Services의 모니터링 및 관찰 가능성 서비스다**. AWS 리소스와 애플리케이션에 대한 실시간 모니터링, 로그 수집, 알람 설정, 자동 대응 기능을 제공하는 종합 관제 도구다.

**간단히 말해서, AWS에서 돌아가는 모든 것들의 상태를 감시하고 문제가 생기면 알려주는 디지털 감시자 역할을 한다**. 마치 병원의 환자 모니터링 시스템처럼 각종 지표를 실시간으로 추적하고 이상 징후를 감지한다.

## CloudWatch의 핵심 기능

### 1. 메트릭 모니터링

**AWS 리소스의 성능 지표를 실시간으로 수집하고 저장한다**:

| 서비스 | 주요 메트릭 | 모니터링 항목 |
|--------|-------------|---------------|
| **EC2** | CPU 사용률, 네트워크 I/O, 디스크 I/O | 인스턴스 성능 및 상태 |
| **RDS** | 데이터베이스 연결 수, 쿼리 성능, 저장 공간 | DB 성능 및 용량 |
| **Lambda** | 함수 실행 시간, 오류율, 동시 실행 수 | 서버리스 함수 성능 |
| **S3** | 요청 수, 데이터 전송량, 오류율 | 스토리지 사용 패턴 |

### 2. 로그 관리 (CloudWatch Logs)

**애플리케이션과 시스템 로그를 중앙 집중식으로 수집하고 분석한다**:
- 실시간 로그 스트리밍
- 로그 검색 및 필터링
- 로그 보관 정책 설정
- 다른 AWS 서비스와 연동

### 3. 알람 및 알림

**설정한 임계값을 초과하면 자동으로 알림을 발송한다**:
- 이메일, SMS, SNS를 통한 알림
- Auto Scaling 트리거
- Lambda 함수 실행
- EC2 인스턴스 자동 재시작

## 실제 활용 시나리오

### 웹사이트 성능 모니터링

**온라인 쇼핑몰을 운영하는 경우**:

1. **평상시 모니터링**:
   - EC2 인스턴스 CPU 사용률 70% 이하 유지
   - 웹사이트 응답 시간 2초 이내
   - 데이터베이스 연결 수 모니터링

2. **이상 상황 감지**:
   - CPU 사용률이 90% 초과 시 알람 발송
   - 응답 시간이 5초 초과 시 개발팀에 SMS 발송
   - 에러 로그 급증 시 자동으로 추가 인스턴스 실행

### 비용 최적화 모니터링

**클라우드 비용 관리를 위한 활용**:
- 사용하지 않는 리소스 탐지
- 예상 비용 초과 시 알림
- 리소스 사용 패턴 분석을 통한 Right-sizing

## CloudWatch의 구성 요소

### 메트릭 (Metrics)

**메트릭은 시간 순서대로 정렬된 데이터 포인트의 집합이다**:
- **기본 메트릭**: AWS 서비스에서 자동 제공
- **사용자 지정 메트릭**: 애플리케이션에서 직접 전송
- **세부 모니터링**: 1분 간격으로 데이터 수집

### 대시보드

**여러 메트릭을 한 화면에서 시각적으로 모니터링**:
- 사용자 정의 차트와 그래프
- 실시간 데이터 업데이트
- 팀 간 공유 가능
- 드릴다운 기능으로 상세 분석

### CloudWatch Events (현재 EventBridge)

**AWS 리소스의 상태 변화를 감지하고 자동으로 대응**:
- EC2 인스턴스 시작/종료 이벤트
- Auto Scaling 그룹 변경 사항
- 예약된 작업 실행
- 서드파티 SaaS 애플리케이션 이벤트

## 비용 구조

### 요금 체계

**CloudWatch는 사용량 기반 과금 모델을 채택한다**:

| 항목 | 무료 제공 | 추가 비용 |
|------|-----------|-----------|
| **기본 모니터링** | 10개 메트릭 | 메트릭당 월 $0.30 |
| **세부 모니터링** | - | 메트릭당 월 $2.00 |
| **API 요청** | 월 100만 건 | 100만 건당 $0.01 |
| **로그 수집** | 5GB | GB당 $0.50 |
| **대시보드** | 3개 | 대시보드당 월 $3.00 |

## 다른 모니터링 도구와의 비교

### CloudWatch vs 서드파티 도구

| 특징 | CloudWatch | Datadog | New Relic |
|------|------------|---------|-----------|
| **AWS 통합** | 네이티브 완벽 지원 | API 통합 | API 통합 |
| **비용** | 사용량 기반 | 월 정액제 | 월 정액제 |
| **학습 곡선** | AWS 생태계 이해 필요 | 직관적 UI | 직관적 UI |
| **확장성** | AWS 환경에 최적화 | 멀티클라우드 지원 | 멀티클라우드 지원 |

## 모범 사례

### 효과적인 CloudWatch 활용법

1. **적절한 메트릭 선택**: 비즈니스 영향도가 높은 지표 우선 모니터링
2. **알람 임계값 최적화**: 너무 민감하면 알람 피로도 증가, 너무 둔감하면 문제 놓칠 수 있음
3. **로그 보관 정책**: 비용 절약을 위해 불필요한 로그는 적절한 시점에 삭제
4. **태그 활용**: 리소스별 비용 추적과 관리 용이성 향상

### 자동화 구현

**CloudWatch와 다른 AWS 서비스를 연동한 자동 대응 시스템**:
- 고부하 시 Auto Scaling으로 인스턴스 자동 증설
- 장애 감지 시 Lambda 함수로 복구 작업 실행
- 비정상 인스턴스 자동 교체
- 비용 임계값 초과 시 개발팀에 자동 알림

## CloudWatch의 한계와 보완점

### 주요 제약사항

- **지연 시간**: 일부 메트릭은 수집까지 최대 15분 소요
- **보존 기간**: 기본 메트릭은 최대 15개월까지만 보관
- **커스터마이징**: 서드파티 도구 대비 시각화 옵션 제한적
- **복잡한 분석**: 고급 분석 기능은 별도 도구 필요

### 보완 방법

**CloudWatch를 중심으로 한 통합 모니터링 환경 구축**:
- CloudWatch + X-Ray: 애플리케이션 성능 상세 추적
- CloudWatch + ElasticSearch: 로그 고급 분석
- CloudWatch + Grafana: 고급 시각화 대시보드

CloudWatch는 **AWS 환경에서 안정적인 서비스 운영을 위한 필수 도구**로, 단순한 모니터링을 넘어서 자동화된 운영 관리까지 가능하게 해주는 강력한 플랫폼이다. 적절히 설정하고 활용하면 장애 예방과 빠른 문제 해결, 그리고 비용 최적화까지 동시에 달성할 수 있는 핵심적인 AWS 서비스다.
