# AWS DocumentDB란?

## 개념 정의
**AWS DocumentDB**는 **MongoDB와 호환되는 완전 관리형 문서형 NoSQL 데이터베이스 서비스**다. JSON 형태의 문서 데이터를 저장하고 처리하는 데 특화되어 있으며, MongoDB의 API 및 도구를 그대로 사용할 수 있다.

Aurora와 동일한 분산 스토리지 아키텍처를 기반으로 구축되어 MongoDB보다 높은 성능과 가용성을 제공한다.

## 핵심 특징

### **MongoDB 호환성**
- MongoDB 3.6, 4.0, 5.0 API와 호환되어 기존 애플리케이션 코드를 그대로 사용할 수 있다
- 동일한 MongoDB 드라이버와 도구들을 지원한다
- DMS를 통한 MongoDB에서 DocumentDB로의 무중단 마이그레이션이 가능하다

### **Aurora 기반 아키텍처**
- **컴퓨트와 스토리지가 분리된 구조**로 Aurora와 동일한 아키텍처를 사용한다
- 3개 가용 영역에 6개 복사본을 자동으로 생성하여 높은 내구성을 보장한다
- **최대 128TB**까지 자동 스토리지 확장을 지원한다

### **클러스터 구조**
- **최대 16개 인스턴스** (Primary 1개 + Read Replica 15개)로 구성할 수 있다
- **클러스터 엔드포인트**(쓰기용)와 **읽기 엔드포인트**(읽기용)를 별도로 제공한다
- 복제본 지연 시간이 한 자릿수 밀리초로 매우 짧다

## Document Database 특징

### **Schema-less 구조**
- 스키마 없이 유연한 데이터 구조를 지원한다
- 동일 컬렉션 내 문서들이 서로 다른 필드를 가질 수 있다
- JSON/BSON 형태로 데이터를 저장한다

### **용어 차이**
| DocumentDB | RDBMS |
|------------|--------|
| 데이터베이스 | 데이터베이스 |
| 컬렉션 | 테이블 |
| 문서(Document) | 행(Row) |
| 필드 | 컬럼 |

## 다른 AWS 데이터베이스 서비스와의 차이

### **vs RDS (관계형 데이터베이스)**
| 특징 | DocumentDB | RDS |
|------|------------|-----|
| **데이터 모델** | JSON 문서 (NoSQL) | 테이블/행/열 (관계형) |
| **스키마** | Schema-less | 고정 스키마 |
| **쿼리 언어** | MongoDB 쿼리/JavaScript | SQL |
| **확장성** | 수평/수직 확장 용이 | 주로 수직 확장 |
| **ACID** | 제한적 지원 | 완전 지원 |

### **vs DynamoDB (NoSQL)**
| 특징 | DocumentDB | DynamoDB |
|------|------------|-----------|
| **데이터 모델** | Document Store | Key-Value/Document |
| **호환성** | MongoDB 호환 | AWS 전용 API |
| **복잡한 쿼리** | 풍부한 쿼리 지원 | 제한적 쿼리 |
| **인덱싱** | 다양한 인덱스 | 주로 Primary/GSI |
| **관리** | 클러스터 관리 필요 | 완전 서버리스 |
| **비용** | 인스턴스 기반 | 사용량 기반 |

### **vs Aurora (관계형)**
| 특징 | DocumentDB | Aurora |
|------|------------|--------|
| **데이터 모델** | JSON 문서 | 관계형 |
| **아키텍처** | 동일한 분산 스토리지 | 동일한 분산 스토리지 |
| **성능** | 문서 쿼리 최적화 | SQL 쿼리 최적화 |
| **API** | MongoDB API | SQL 표준 |

## 주요 기능

### **고급 쿼리 지원**
- MongoDB와 동일한 CRUD 연산을 지원한다
- **Aggregation Pipeline**을 통한 복잡한 데이터 분석이 가능하다
- 다양한 인덱스 타입 (단일, 복합, 텍스트, 부분 인덱스 등)을 제공한다

### **Elastic Cluster**
- 페타바이트 규모까지 확장 가능한 신규 클러스터 타입이다
- 초당 수백만 읽기/쓰기 요청을 처리할 수 있다
- 샤딩 유사한 수평 확장을 지원한다

### **보안 및 규정 준수**
- VPC 내 배포로 네트워크 격리를 보장한다
- 저장 및 전송 중 데이터 암호화를 지원한다
- IAM과 통합된 액세스 제어를 제공한다

## MongoDB와의 차이점

### **호환성 제한**
- MongoDB API 테스트의 약 **35%만 통과**한다 (MongoDB 주장)
- 일부 고급 MongoDB 기능은 지원하지 않는다

### **샤딩 미지원**
- 기본 클러스터에서는 MongoDB의 샤딩 기능을 지원하지 않는다
- Write 성능 개선을 위한 수평 확장에 제약이 있다
- (Elastic Cluster에서는 샤딩 유사 기능 제공)

### **스토리지 엔진**
- MongoDB의 WiredTiger 엔진 대신 Aurora 스토리지 엔진을 사용한다
- MongoDB의 일부 성능 튜닝 파라미터를 사용할 수 없다

## 주요 활용 사례

### **콘텐츠 관리**
- CMS, 블로그 플랫폼의 문서 저장
- 제품 카탈로그 및 메타데이터 관리

### **실시간 애플리케이션**
- 채팅, 게임, IoT 데이터 처리
- 사용자 프로필 및 세션 관리

### **분석 및 로깅**
- 로그 데이터 수집 및 분석
- 이벤트 소싱 및 감사 추적

## 제약사항

### **MongoDB 완전 호환성 부족**
- 모든 MongoDB 기능이 지원되지는 않는다
- 특정 MongoDB 고급 기능 사용 시 마이그레이션 제약이 있을 수 있다

### **비용**
- DynamoDB보다 상대적으로 높은 비용이다
- 인스턴스 기반 과금으로 최소 비용이 발생한다

DocumentDB는 **MongoDB의 유연성과 AWS의 관리 편의성**을 결합한 서비스로, JSON 기반 애플리케이션 개발과 MongoDB 마이그레이션에 최적화된 솔루션이다.
